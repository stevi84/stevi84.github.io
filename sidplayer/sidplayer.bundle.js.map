{"version":3,"file":"sidplayer.bundle.js","mappings":"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IACN,IAAM,KACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,OACN,IAAM,MACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,SACN,IAAM,QACN,IAAM,MACN,IAAM,KACN,IAAM,SACN,IAAM,MACN,IAAM,OACN,IAAM,MACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,OACN,IAAM,MACN,IAAM,OACN,IAAM,MACN,IAAM,MACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,KACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,KACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,KACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAM,KACN,IAAM,KACN,IAAM,IACN,IAAM,KACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KAWKC,EAAWnI,MAAOY,IAC7B,MAAMwH,EAAS,IAAIC,cATSrI,OAAOY,GACnC,IAAI0H,SAAQ,CAACC,EAASC,KACpB,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,IAAMJ,EAAQE,EAAOG,QACrCH,EAAOI,QAAUL,EACjBC,EAAOK,kBAAkBlI,EAAK,IAIEmI,CAAsBnI,IAExD,IAAI/O,EAAI,EACauW,EAAOY,UAAUnX,GAAG,GACzCA,GAAK,EACL,MAAMoX,EAAeb,EAAOY,UAAUnX,GAAG,GACzCA,GAAK,EACL,MAAMqX,EAAed,EAAOY,UAAUnX,GAAG,GACzCA,GAAK,EACL,MAAMsX,EAAef,EAAOY,UAAUnX,GAAG,GACzCA,GAAK,EACL,MACMuX,EADc,EACcH,EAC5BI,EAAcD,EAAcF,EAC5BI,EAAYD,EAAcF,EAE1B7N,EAAoB,GAC1B,IAAK,IAAIzJ,EANW,EAMMA,EAAIuX,EAAavX,GAAK,EAAG,CACjD,MAAM+V,EAAQQ,EAAOmB,SAAS1X,GACxBgW,EAAQO,EAAOmB,SAAS1X,EAAI,GAC5B8U,EAAMgB,EAAWC,EAAOC,GAC9B,IAAKlB,EAAK,CACR1E,QAAQC,MAAM,wCAAwC5G,EAAO1J,iBAAiBgW,YAAgBC,KAC9F,KACF,CACAvM,EAAOjK,KAAKsV,EACd,CAEA,MAAMpL,EAAoB,GAC1B,IAAK,IAAI1J,EAAIuX,EAAavX,EAAIwX,EAAaxX,GAAK,EAAG,CACjD,MAAM+V,EAAQQ,EAAOmB,SAAS1X,GACxBgW,EAAQO,EAAOmB,SAAS1X,EAAI,GAC5B8U,EAAMgB,EAAWC,EAAOC,GAC9B,IAAKlB,EAAK,CACR1E,QAAQC,MAAM,wCAAwC3G,EAAO3J,iBAAiBgW,YAAgBC,KAC9F,KACF,CACAtM,EAAOlK,KAAKsV,EACd,CAEA,MAAMnL,EAAoB,GAC1B,IAAK,IAAI3J,EAAIwX,EAAaxX,EAAIyX,EAAWzX,GAAK,EAAG,CAC/C,MAAM+V,EAAQQ,EAAOmB,SAAS1X,GACxBgW,EAAQO,EAAOmB,SAAS1X,EAAI,GAC5B8U,EAAMgB,EAAWC,EAAOC,GAC9B,IAAKlB,EAAK,CACR1E,QAAQC,MAAM,wCAAwC1G,EAAO5J,iBAAiBgW,YAAgBC,KAC9F,KACF,CACArM,EAAOnK,KAAKsV,EACd,CAEA,MAAM3I,EAAiB,GACvB,IAAIwL,EAAO,GACX,IAAK,IAAI3X,EAAIyX,EAAWzX,EAAIuW,EAAOqB,WAAY5X,IAAK,CAClD,MAAM6X,EAAOtB,EAAOmB,SAAS1X,GAC7B,GAAa,KAAT6X,EACF1L,EAAK3M,KAAKmY,GACVA,EAAO,OACF,IAAa,IAATE,EAAc,CACnBF,GAAMxL,EAAK3M,KAAKmY,GACpB,KACF,CACEA,GAAQtB,EAAMwB,IAAS,GACzB,CACF,CAEA,MAAO,CAAEjO,OAAQ,CAACH,EAAQC,EAAQC,GAASwC,OAAM,C,GC3zB/C2L,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBxK,IAAjByK,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUG,EAAQA,EAAOD,QAASH,GAG/CI,EAAOD,OACf,CLtBIvZ,EAAkC,mBAAX0Z,OAAwBA,OAAO,kBAAoB,qBAC1EzZ,EAAmC,mBAAXyZ,OAAwBA,OAAO,mBAAqB,sBAC5ExZ,EAAiC,mBAAXwZ,OAAwBA,OAAO,iBAAmB,oBACxEvZ,EAAgBwZ,IAChBA,GAASA,EAAMrH,EAAI,IACrBqH,EAAMrH,EAAI,EACVqH,EAAMC,SAASC,GAAQA,EAAGC,MAC1BH,EAAMC,SAASC,GAAQA,EAAGC,IAAMD,EAAGC,IAAMD,MAC1C,EAyBDT,EAAoB9R,EAAI,CAACkS,EAAQO,EAAMC,KACtC,IAAIL,EACJK,KAAcL,EAAQ,IAAIrH,GAAK,GAC/B,IAEI2H,EACAC,EACAlC,EAJAmC,EAAY,IAAIC,IAChBb,EAAUC,EAAOD,QAIjBc,EAAU,IAAIvC,SAAQ,CAACC,EAASuC,KACnCtC,EAASsC,EACTJ,EAAenC,CAAO,IAEvBsC,EAAQpa,GAAkBsZ,EAC1Bc,EAAQra,GAAkB6Z,IAAQF,GAASE,EAAGF,GAAQQ,EAAUP,QAAQC,GAAKQ,EAAe,OAAEE,SAC9Ff,EAAOD,QAAUc,EACjBN,GAAMS,IAEL,IAAIX,EADJI,EAvCa,CAACO,GAAUA,EAAKzD,KAAK0D,IACnC,GAAW,OAARA,GAA+B,iBAARA,EAAkB,CAC3C,GAAGA,EAAIza,GAAgB,OAAOya,EAC9B,GAAGA,EAAIC,KAAM,CACZ,IAAIf,EAAQ,GACZA,EAAMrH,EAAI,EACVmI,EAAIC,MAAMZ,IACTa,EAAI1a,GAAkB6Z,EACtB3Z,EAAawZ,EAAM,IAChB3J,IACH2K,EAAIza,GAAgB8P,EACpB7P,EAAawZ,EAAM,IAEpB,IAAIgB,EAAM,CAAC,EAEX,OADAA,EAAI3a,GAAkB6Z,GAAQA,EAAGF,GAC1BgB,CACR,CACD,CACA,IAAIC,EAAM,CAAC,EAGX,OAFAA,EAAI5a,GAAiBua,MACrBK,EAAI3a,GAAkBwa,EACfG,CAAG,IAkBKC,CAASL,GAEvB,IAAIM,EAAY,IAAOb,EAAYlD,KAAKzE,IACvC,GAAGA,EAAEpS,GAAe,MAAMoS,EAAEpS,GAC5B,OAAOoS,EAAErS,EAAe,IAErBoa,EAAU,IAAIvC,SAASC,KAC1B8B,EAAK,IAAO9B,EAAQ+C,IACjBhB,EAAI,EACP,IAAIiB,EAAWC,GAAOA,IAAMrB,IAAUQ,EAAUc,IAAID,KAAOb,EAAU9K,IAAI2L,GAAIA,IAAMA,EAAE1I,IAAMuH,EAAGC,IAAKkB,EAAEna,KAAKgZ,KAC1GI,EAAYlD,KAAK0D,GAASA,EAAIza,GAAe+a,IAAU,IAExD,OAAOlB,EAAGC,EAAIO,EAAUS,GAAW,IAChCI,IAAUA,EAAMlD,EAAOqC,EAAQna,GAAgBgb,GAAOhB,EAAaX,GAAWpZ,EAAawZ,MAC/FA,GAASA,EAAMrH,EAAI,IAAMqH,EAAMrH,EAAI,EAAE,EM9DtC8G,EAAoB9G,EAAI,CAACiH,EAAS4B,KACjC,IAAI,IAAIC,KAAOD,EACX/B,EAAoBiC,EAAEF,EAAYC,KAAShC,EAAoBiC,EAAE9B,EAAS6B,IAC5EE,OAAOC,eAAehC,EAAS6B,EAAK,CAAEI,YAAY,EAAMvY,IAAKkY,EAAWC,IAE1E,ECNDhC,EAAoBiC,EAAI,CAACV,EAAKc,IAAUH,OAAOI,UAAUC,eAAeC,KAAKjB,EAAKc,GCGxDrC,EAAoB,I","sources":["webpack://sid-player/webpack/runtime/async module","webpack://sid-player/./src/C64Sid.ts","webpack://sid-player/./src/SidPlayer.ts","webpack://sid-player/./src/SidLoad.ts","webpack://sid-player/./src/SidParse.ts","webpack://sid-player/webpack/bootstrap","webpack://sid-player/webpack/runtime/define property getters","webpack://sid-player/webpack/runtime/hasOwnProperty shorthand","webpack://sid-player/webpack/startup"],"sourcesContent":["var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","export const FREQUENCY_FACTOR = 17734472 / 18 / 16777216; // 0.0587253835466173\n\ntype CustomAudioParamValue =\n  | { startTime: number; value: number; interpolation: 'const' }\n  | { startTime: number; startValue: number; endTime: number; endValue: number; interpolation: 'lin' }\n  | { startTime: number; startValue: number; endValue: number; timeConstant: number; interpolation: 'exp' };\nexport class CustomAudioParam {\n  private _audioContext: AudioContext;\n  private _values: Array<CustomAudioParamValue> = [];\n  private _defaultValue: number;\n\n  constructor(audioContext: AudioContext, defaultValue: number) {\n    this._audioContext = audioContext;\n    this._values.push({ startTime: audioContext.currentTime, value: defaultValue, interpolation: 'const' });\n    this._defaultValue = defaultValue;\n  }\n\n  setValueAtTime(value: number, startTime: number): CustomAudioParam {\n    if (startTime < this._values[0].startTime) {\n      this._values.unshift({ startTime, value, interpolation: 'const' });\n    } else if (startTime >= this._values[this._values.length - 1].startTime) {\n      this._values.push({ startTime, value, interpolation: 'const' });\n    } else {\n      for (let i = 0; i < this._values.length - 1; i++) {\n        if (startTime >= this._values[i].startTime && startTime < this._values[i + 1].startTime) {\n          this._values.splice(i + 1, 0, { startTime, value, interpolation: 'const' });\n          break;\n        }\n      }\n    }\n    return this;\n  }\n\n  getValueAtTime(time: number): number {\n    if (time < this._values[0].startTime) return this._defaultValue;\n\n    let value: CustomAudioParamValue | undefined;\n    if (this._values.length === 1) {\n      value = this._values[0];\n    } else {\n      for (let i = 0; i < this._values.length - 1; i++) {\n        if (time >= this._values[i].startTime && time < this._values[i + 1].startTime) {\n          value = this._values[i];\n          break;\n        }\n      }\n      if (!value) value = this._values[this._values.length - 1];\n    }\n\n    if (value.interpolation === 'const') {\n      return value.value;\n    } else if (value.interpolation === 'lin') {\n      if (time < value.endTime) {\n        return (\n          value.startValue +\n          ((time - value.startTime) / (value.endTime - value.startTime)) * (value.endValue - value.startValue)\n        );\n      } else {\n        return value.endValue;\n      }\n    } else {\n      return (\n        value.endValue + (value.startValue - value.endValue) * Math.exp(-(time - value.startTime) / value.timeConstant)\n      );\n    }\n  }\n\n  get value(): number {\n    return this.getValueAtTime(this._audioContext.currentTime);\n  }\n\n  set value(value: number) {\n    this.setValueAtTime(value, this._audioContext.currentTime);\n  }\n\n  cancelScheduledValues(startTime: number) {\n    const deleteIndex = this._values.findIndex((value) => startTime < value.startTime);\n    if (deleteIndex >= 0) this._values.splice(deleteIndex);\n    if (this._values.length === 0)\n      this._values.push({\n        startTime: this._audioContext.currentTime,\n        value: this._defaultValue,\n        interpolation: 'const',\n      });\n  }\n\n  linearRampToValueAtTime(value: number, endTime: number): CustomAudioParam {\n    if (endTime < this._values[0].startTime) {\n      // nichts tun\n    } else if (endTime >= this._values[this._values.length - 1].startTime) {\n      const startEntry = this._values.pop()!;\n      this._values.push({\n        startTime: startEntry.startTime,\n        startValue: startEntry.interpolation === 'const' ? startEntry.value : startEntry.startValue,\n        endTime,\n        endValue: value,\n        interpolation: 'lin',\n      });\n    } else {\n      for (let i = 0; i < this._values.length - 1; i++) {\n        if (endTime >= this._values[i].startTime && endTime < this._values[i + 1].startTime) {\n          const startEntry = this._values.splice(i, 1)[0];\n          this._values.splice(i, 0, {\n            startTime: startEntry.startTime,\n            startValue: startEntry.interpolation === 'const' ? startEntry.value : startEntry.startValue,\n            endTime,\n            endValue: value,\n            interpolation: 'lin',\n          });\n          break;\n        }\n      }\n    }\n    return this;\n  }\n\n  setTargetAtTime(value: number, startTime: number, timeConstant: number): CustomAudioParam {\n    if (startTime < this._values[0].startTime) {\n      this._values.unshift({\n        startTime,\n        startValue: this._defaultValue,\n        endValue: value,\n        timeConstant,\n        interpolation: 'exp',\n      });\n    } else if (startTime >= this._values[this._values.length - 1].startTime) {\n      this._values.push({\n        startTime,\n        startValue: this.getValueAtTime(startTime),\n        endValue: value,\n        timeConstant,\n        interpolation: 'exp',\n      });\n    } else {\n      for (let i = 0; i < this._values.length - 1; i++) {\n        if (startTime >= this._values[i].startTime && startTime < this._values[i + 1].startTime) {\n          this._values.splice(i + 1, 0, {\n            startTime,\n            startValue: this.getValueAtTime(startTime),\n            endValue: value,\n            timeConstant,\n            interpolation: 'exp',\n          });\n          break;\n        }\n      }\n    }\n    return this;\n  }\n}\n\ntype CustomGenericAudioParamValue<T> = { startTime: number; value: T };\nexport class CustomGenericAudioParam<T> {\n  private _audioContext: AudioContext;\n  private _values: Array<CustomGenericAudioParamValue<T>> = [];\n  private _defaultValue: T;\n\n  constructor(audioContext: AudioContext, defaultValue: T) {\n    this._audioContext = audioContext;\n    this._values.push({ startTime: audioContext.currentTime, value: defaultValue });\n    this._defaultValue = defaultValue;\n  }\n\n  setValueAtTime(value: T, startTime: number): CustomGenericAudioParam<T> {\n    if (startTime < this._values[0].startTime) {\n      this._values.unshift({ startTime, value });\n    } else if (startTime >= this._values[this._values.length - 1].startTime) {\n      this._values.push({ startTime, value });\n    } else {\n      for (let i = 0; i < this._values.length - 1; i++) {\n        if (startTime >= this._values[i].startTime && startTime < this._values[i + 1].startTime) {\n          this._values.splice(i + 1, 0, { startTime, value });\n          break;\n        }\n      }\n    }\n    return this;\n  }\n\n  getValueAtTime(time: number): T {\n    if (time < this._values[0].startTime) return this._defaultValue;\n\n    let value: CustomGenericAudioParamValue<T> | undefined;\n    if (this._values.length === 1) {\n      value = this._values[0];\n    } else {\n      for (let i = 0; i < this._values.length - 1; i++) {\n        if (time >= this._values[i].startTime && time < this._values[i + 1].startTime) {\n          value = this._values[i];\n          break;\n        }\n      }\n      if (!value) value = this._values[this._values.length - 1];\n    }\n    return value.value;\n  }\n\n  get value(): T {\n    return this.getValueAtTime(this._audioContext.currentTime);\n  }\n\n  set value(value: T) {\n    this.setValueAtTime(value, this._audioContext.currentTime);\n  }\n\n  cancelScheduledValues(startTime: number) {\n    const deleteIndex = this._values.findIndex((value) => startTime < value.startTime);\n    if (deleteIndex >= 0) this._values.splice(deleteIndex);\n    if (this._values.length === 0)\n      this._values.push({ startTime: this._audioContext.currentTime, value: this._defaultValue });\n  }\n}\n\ntype VoiceParams = {\n  waveform: AudioParam;\n  frequency: AudioParam;\n  width: AudioParam;\n  sync: AudioParam;\n  rng: AudioParam;\n};\n\nexport class SidOscillator {\n  private _audioContext: AudioContext;\n  private _oscillator: AudioWorkletNode;\n\n  constructor(audioContext: AudioContext) {\n    this._audioContext = audioContext;\n    this._oscillator = new AudioWorkletNode(audioContext, 'C64SidProcessor', {\n      numberOfInputs: 1,\n      numberOfOutputs: 3,\n      outputChannelCount: [1, 1, 1],\n      processorOptions: { sampleRate: audioContext.sampleRate },\n    });\n  }\n\n  get voice1Params(): VoiceParams {\n    return {\n      waveform: this._oscillator.parameters.get('voice1Waveform')!,\n      frequency: this._oscillator.parameters.get('voice1Frequency')!,\n      width: this._oscillator.parameters.get('voice1Width')!,\n      sync: this._oscillator.parameters.get('voice1Sync')!,\n      rng: this._oscillator.parameters.get('voice1Rng')!,\n    };\n  }\n\n  get voice2Params(): VoiceParams {\n    return {\n      waveform: this._oscillator.parameters.get('voice2Waveform')!,\n      frequency: this._oscillator.parameters.get('voice2Frequency')!,\n      width: this._oscillator.parameters.get('voice2Width')!,\n      sync: this._oscillator.parameters.get('voice2Sync')!,\n      rng: this._oscillator.parameters.get('voice2Rng')!,\n    };\n  }\n\n  get voice3Params(): VoiceParams {\n    return {\n      waveform: this._oscillator.parameters.get('voice3Waveform')!,\n      frequency: this._oscillator.parameters.get('voice3Frequency')!,\n      width: this._oscillator.parameters.get('voice3Width')!,\n      sync: this._oscillator.parameters.get('voice3Sync')!,\n      rng: this._oscillator.parameters.get('voice3Rng')!,\n    };\n  }\n\n  connect(destination: AudioNode, output: number, input?: number) {\n    this._oscillator.connect(destination, output, input);\n  }\n\n  disconnect() {\n    this._oscillator.disconnect();\n  }\n}\n\nexport type Waveform = 'triangle' | 'sawtooth' | 'pulse' | 'noise';\n\nexport class SidVoice {\n  private _audioContext: AudioContext;\n  private _adsrGain: GainNode;\n  private _waveformParameter: AudioParam;\n  private _frequencyParameter: AudioParam;\n  private _widthParameter: AudioParam;\n  private _syncParameter: AudioParam;\n  private _rngParameter: AudioParam;\n  private _attackDurationParameter: CustomAudioParam;\n  private _decayDurationParameter: CustomAudioParam;\n  private _sustainLevelParameter: CustomAudioParam;\n  private _releaseDurationParameter: CustomAudioParam;\n  private _adsrGainParameter: CustomAudioParam;\n\n  constructor(audioContext: AudioContext, voiceParams: VoiceParams) {\n    this._audioContext = audioContext;\n    this._adsrGain = new GainNode(audioContext, { gain: 0 });\n    this._waveformParameter = voiceParams.waveform;\n    this._frequencyParameter = voiceParams.frequency;\n    this._widthParameter = voiceParams.width;\n    this._syncParameter = voiceParams.sync;\n    this._rngParameter = voiceParams.rng;\n    this._attackDurationParameter = new CustomAudioParam(audioContext, 0.002);\n    this._decayDurationParameter = new CustomAudioParam(audioContext, 0.006);\n    this._sustainLevelParameter = new CustomAudioParam(audioContext, 0);\n    this._releaseDurationParameter = new CustomAudioParam(audioContext, 0.006);\n    this._adsrGainParameter = new CustomAudioParam(audioContext, 0);\n  }\n\n  get inNode(): GainNode {\n    return this._adsrGain;\n  }\n\n  get frequencyParam(): AudioParam {\n    return this._frequencyParameter;\n  }\n\n  get widthParam(): AudioParam {\n    return this._widthParameter;\n  }\n\n  /**\n   *\n   * @param value 0-65535\n   * @param startTime\n   */\n  c64Frequency(value: number, startTime: number = this._audioContext.currentTime) {\n    this.frequency(value * FREQUENCY_FACTOR, startTime);\n  }\n  /**\n   *\n   * @param value [Hz]\n   * @param startTime\n   */\n  frequency(value: number, startTime: number = this._audioContext.currentTime) {\n    this._frequencyParameter.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-15\n   * @param startTime\n   */\n  c64Waveform(value: number, startTime: number = this._audioContext.currentTime) {\n    this._waveformParameter.setValueAtTime(value, startTime);\n  }\n  waveform(value: Waveform[], startTime: number = this._audioContext.currentTime) {\n    const waveforms: number =\n      (value.includes('triangle') ? 1 : 0) +\n      (value.includes('sawtooth') ? 2 : 0) +\n      (value.includes('pulse') ? 4 : 0) +\n      (value.includes('noise') ? 8 : 0);\n    this.c64Waveform(waveforms, startTime);\n  }\n\n  private static timeTable: number[] = [\n    0.002, 0.008, 0.016, 0.024, 0.038, 0.056, 0.068, 0.08, 0.1, 0.25, 0.5, 0.8, 1, 3, 5, 8,\n  ];\n\n  /**\n   *\n   * @param value 0-15\n   * @param startTime\n   */\n  c64AttackDuration(value: number, startTime: number = this._audioContext.currentTime) {\n    this.attackDuration(SidVoice.timeTable[value], startTime);\n  }\n  /**\n   *\n   * @param value [s]\n   * @param startTime\n   */\n  attackDuration(value: number, startTime: number = this._audioContext.currentTime) {\n    this._attackDurationParameter.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-15\n   * @param startTime\n   */\n  c64DecayDuration(value: number, startTime: number = this._audioContext.currentTime) {\n    this.decayDuration(SidVoice.timeTable[value] * 3, startTime);\n  }\n  /**\n   *\n   * @param value [s]\n   * @param startTime\n   */\n  decayDuration(value: number, startTime: number = this._audioContext.currentTime) {\n    this._decayDurationParameter.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-15\n   * @param startTime\n   */\n  c64SustainLevel(value: number, startTime: number = this._audioContext.currentTime) {\n    this.sustainLevel(value / 15, startTime);\n  }\n  /**\n   *\n   * @param value [%] 0-1\n   * @param startTime\n   */\n  sustainLevel(value: number, startTime: number = this._audioContext.currentTime) {\n    this._sustainLevelParameter.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-15\n   * @param startTime\n   */\n  c64ReleaseDuration(value: number, startTime: number = this._audioContext.currentTime) {\n    this.releaseDuration(SidVoice.timeTable[value] * 3, startTime);\n  }\n  /**\n   *\n   * @param value [s]\n   * @param startTime\n   */\n  releaseDuration(value: number, startTime: number = this._audioContext.currentTime) {\n    this._releaseDurationParameter.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-4095\n   * @param startTime\n   */\n  c64PulseWidth(value: number, startTime: number = this._audioContext.currentTime) {\n    this.pulseWidth(value / 4095, startTime);\n  }\n  /**\n   *\n   * @param value [%] 0-1, 0 (only low) ... 1 (only high)\n   * @param startTime\n   */\n  pulseWidth(value: number, startTime: number = this._audioContext.currentTime) {\n    this._widthParameter.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-1\n   * @param startTime\n   */\n  c64Sync(value: number, startTime: number = this._audioContext.currentTime) {\n    this._syncParameter.setValueAtTime(value, startTime);\n  }\n  /**\n   *\n   * @param value on/off\n   * @param startTime\n   */\n  sync(value: boolean, startTime: number = this._audioContext.currentTime) {\n    this.c64Sync(Number(value), startTime);\n  }\n\n  /**\n   *\n   * @param value 0-1\n   * @param startTime\n   */\n  c64Rng(value: number, startTime: number = this._audioContext.currentTime) {\n    this._rngParameter.setValueAtTime(value, startTime);\n  }\n  /**\n   *\n   * @param value on/off\n   * @param startTime\n   */\n  rng(value: boolean, startTime: number = this._audioContext.currentTime) {\n    this.c64Rng(Number(value), startTime);\n  }\n\n  start(startTime: number = this._audioContext.currentTime) {\n    // ADSR-Envelope\n    // https://www.leafwindow.com/en/digital-piano-with-web-audio-api-5-en/\n    const attackDuration = this._attackDurationParameter.value;\n    const decayDuration = this._decayDurationParameter.value;\n    const timeConstant = 0.2452 * decayDuration;\n    const sustainLevel = this._sustainLevelParameter.value;\n    const startValue = this._adsrGainParameter.getValueAtTime(startTime);\n    // cancelScheduledValues instead of cancelAndHoldAtTime during attack phase removes the whole linearRamp\n    // cancelAndHoldAtTime without setValueAtTime during decay/release phase -> linearRamp starts at 0\n    this._adsrGain.gain.cancelAndHoldAtTime(startTime);\n    this._adsrGain.gain.setValueAtTime(startValue, startTime);\n    this._adsrGain.gain.linearRampToValueAtTime(1, startTime + attackDuration);\n    this._adsrGain.gain.setTargetAtTime(sustainLevel, startTime + attackDuration, timeConstant);\n    this._adsrGainParameter.cancelScheduledValues(startTime);\n    this._adsrGainParameter.setValueAtTime(startValue, startTime);\n    this._adsrGainParameter.linearRampToValueAtTime(1, startTime + attackDuration);\n    this._adsrGainParameter.setTargetAtTime(sustainLevel, startTime + attackDuration, timeConstant);\n  }\n\n  stop(startTime: number = this._audioContext.currentTime) {\n    const releaseDuration = this._releaseDurationParameter.value;\n    const timeConstant = 0.2452 * releaseDuration;\n    const startValue = this._adsrGainParameter.getValueAtTime(startTime);\n    this._adsrGain.gain.cancelAndHoldAtTime(startTime);\n    this._adsrGain.gain.setValueAtTime(startValue, startTime);\n    this._adsrGain.gain.setTargetAtTime(0, startTime, timeConstant);\n    this._adsrGainParameter.cancelScheduledValues(startTime);\n    this._adsrGainParameter.setValueAtTime(startValue, startTime);\n    this._adsrGainParameter.setTargetAtTime(0, startTime, timeConstant);\n  }\n\n  connect(destination: AudioNode) {\n    this._adsrGain.connect(destination);\n  }\n\n  disconnect() {\n    this._adsrGain.disconnect();\n  }\n\n  reset(startTime: number = this._audioContext.currentTime) {\n    this._adsrGain.gain.cancelScheduledValues(startTime);\n    this._adsrGain.gain.setValueAtTime(0, startTime);\n    this._waveformParameter.cancelScheduledValues(startTime);\n    this._waveformParameter.setValueAtTime(0, startTime);\n    this._frequencyParameter.cancelScheduledValues(startTime);\n    this._frequencyParameter.setValueAtTime(0, startTime);\n    this._widthParameter.cancelScheduledValues(startTime);\n    this._widthParameter.setValueAtTime(0.5, startTime);\n    this._syncParameter.cancelScheduledValues(startTime);\n    this._syncParameter.setValueAtTime(0, startTime);\n    this._rngParameter.cancelScheduledValues(startTime);\n    this._rngParameter.setValueAtTime(0, startTime);\n    this._attackDurationParameter.cancelScheduledValues(startTime);\n    this._attackDurationParameter.setValueAtTime(0.002, startTime);\n    this._decayDurationParameter.cancelScheduledValues(startTime);\n    this._decayDurationParameter.setValueAtTime(0.006, startTime);\n    this._sustainLevelParameter.cancelScheduledValues(startTime);\n    this._sustainLevelParameter.setValueAtTime(0, startTime);\n    this._releaseDurationParameter.cancelScheduledValues(startTime);\n    this._releaseDurationParameter.setValueAtTime(0.006, startTime);\n    this._adsrGainParameter.cancelScheduledValues(startTime);\n    this._adsrGainParameter.setValueAtTime(0, startTime);\n  }\n}\n\nexport const getFilterFrequency = (value: number, y0: number, ymax: number, x0: number, mu: number) =>\n  y0 + (ymax - y0) / (1 + Math.exp(-mu * (value - x0)));\n// lowpass ccs64\nexport const getLowPassFrequency = (value: number) => getFilterFrequency(value, 253.7, 1786, 776.6, 0.01395);\n// highpass ccs64\nexport const getHighPassFrequency = (value: number) => getFilterFrequency(value, 406, 6032, 979.5, 0.0108);\n// bandpass ccs64\nexport const getBandPassFrequency = (value: number) => getFilterFrequency(value, 317.2, 2447, 838.8, 0.01555);\n\nexport const getFilterValue = (frequency: number, y0: number, ymax: number, x0: number, mu: number) => {\n  if (frequency <= y0) return 0;\n  if (frequency >= ymax) return 2047;\n  const value = x0 - Math.log((ymax - frequency) / (frequency - y0)) / mu;\n  return Math.max(Math.min(value, 2047), 0);\n};\n\n// lowpass ccs64\nexport const getLowPassValue = (frequency: number) => getFilterValue(frequency, 253.7, 1786, 776.6, 0.01395);\n// highpass ccs64\nexport const getHighPassValue = (frequency: number) => getFilterValue(frequency, 406, 6032, 979.5, 0.0108);\n// bandpass ccs64\nexport const getBandPassValue = (frequency: number) => getFilterValue(frequency, 317.2, 2447, 838.8, 0.01555);\n\nexport const getFilterResonance = (value: number, a: number, b: number, c: number, m: number, n: number) =>\n  (a * value ** 2 + b * value + c - n) / m;\n// lowpass ccs64\nexport const getLowPassResonance = (value: number) =>\n  getFilterResonance(value, -0.0142, 0.6892, -0.0047, 1.0014, -0.0762);\n// highpass ccs64\nexport const getHighPassResonance = (value: number) =>\n  getFilterResonance(value, -0.0148, 0.6794, 0.1406, 0.9393, 0.0526);\n// bandpass ccs64\nexport const getBandPassResonance = (value: number) =>\n  getFilterResonance(value, -0.0125, 0.6889, 0.0649, 1.0167, 0.2444);\n\nexport type FilterMode = 'highpass' | 'lowpass' | 'bandpass';\n\nexport class SidFilter {\n  private _audioContext: AudioContext;\n  private _inNode: GainNode;\n  private _lowPass: BiquadFilterNode;\n  private _highPass: BiquadFilterNode;\n  private _bandPass: BiquadFilterNode;\n  private _bandPassPeak: BiquadFilterNode;\n  private _outNode: GainNode;\n\n  private _in_out: GainNode;\n  private _in_low: GainNode;\n  private _in_band: GainNode;\n  private _in_high: GainNode;\n  private _low_band: GainNode;\n  private _low_high: GainNode;\n  private _band_high: GainNode;\n  private _low_out: GainNode;\n  private _band_out: GainNode;\n  private _high_out: GainNode;\n\n  constructor(audioContext: AudioContext) {\n    this._audioContext = audioContext;\n    this._inNode = new GainNode(audioContext, { gain: 1 });\n    this._lowPass = new BiquadFilterNode(audioContext, { type: 'lowpass' });\n    this._highPass = new BiquadFilterNode(audioContext, { type: 'highpass' });\n    this._bandPass = new BiquadFilterNode(audioContext, { type: 'bandpass', Q: 1 });\n    this._bandPassPeak = new BiquadFilterNode(audioContext, { type: 'peaking', Q: 1 });\n    this._outNode = new GainNode(audioContext, { gain: 1 });\n\n    this._in_out = new GainNode(audioContext, { gain: 1 });\n    this._in_low = new GainNode(audioContext, { gain: 0 });\n    this._in_band = new GainNode(audioContext, { gain: 0 });\n    this._in_high = new GainNode(audioContext, { gain: 0 });\n    this._low_band = new GainNode(audioContext, { gain: 0 });\n    this._low_high = new GainNode(audioContext, { gain: 0 });\n    this._band_high = new GainNode(audioContext, { gain: 0 });\n    this._low_out = new GainNode(audioContext, { gain: 0 });\n    this._band_out = new GainNode(audioContext, { gain: 0 });\n    this._high_out = new GainNode(audioContext, { gain: 0 });\n\n    this._inNode.connect(this._in_out);\n    this._in_out.connect(this._outNode);\n    this._inNode.connect(this._in_low);\n    this._in_low.connect(this._lowPass);\n    this._inNode.connect(this._in_band);\n    this._in_band.connect(this._bandPass);\n    this._bandPass.connect(this._bandPassPeak);\n    this._inNode.connect(this._in_high);\n    this._in_high.connect(this._highPass);\n    this._lowPass.connect(this._low_band);\n    this._low_band.connect(this._bandPass);\n    this._lowPass.connect(this._low_high);\n    this._low_high.connect(this._highPass);\n    this._bandPassPeak.connect(this._band_high);\n    this._band_high.connect(this._highPass);\n    this._lowPass.connect(this._low_out);\n    this._low_out.connect(this._outNode);\n    this._bandPassPeak.connect(this._band_out);\n    this._band_out.connect(this._outNode);\n    this._highPass.connect(this._high_out);\n    this._high_out.connect(this._outNode);\n  }\n\n  get inNode(): GainNode {\n    return this._inNode;\n  }\n\n  get lowPassFilter(): BiquadFilterNode {\n    return this._lowPass;\n  }\n\n  get highPassFilter(): BiquadFilterNode {\n    return this._highPass;\n  }\n\n  get bandPassFilter(): BiquadFilterNode {\n    return this._bandPass;\n  }\n\n  get bandPassPeakFilter(): BiquadFilterNode {\n    return this._bandPassPeak;\n  }\n\n  /**\n   *\n   * @param value 0-2047\n   * @param startTime\n   */\n  c64Frequency(value: number, startTime: number = this._audioContext.currentTime) {\n    this._highPass.frequency.setValueAtTime(getHighPassFrequency(value), startTime);\n    this._lowPass.frequency.setValueAtTime(getLowPassFrequency(value), startTime);\n    const bandPassFrequency = getBandPassFrequency(value);\n    this._bandPass.frequency.setValueAtTime(bandPassFrequency, startTime);\n    this._bandPassPeak.frequency.setValueAtTime(bandPassFrequency, startTime);\n  }\n  frequency(value: number, startTime: number = this._audioContext.currentTime) {\n    this._highPass.frequency.setValueAtTime(value, startTime);\n    this._lowPass.frequency.setValueAtTime(value, startTime);\n    this._bandPass.frequency.setValueAtTime(value, startTime);\n    this._bandPassPeak.frequency.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-15\n   * @param startTime\n   */\n  c64Resonance(value: number, startTime: number = this._audioContext.currentTime) {\n    this._highPass.Q.setValueAtTime(getHighPassResonance(value), startTime);\n    this._lowPass.Q.setValueAtTime(getLowPassResonance(value), startTime);\n    this._bandPassPeak.gain.setValueAtTime(getBandPassResonance(value), startTime);\n  }\n  resonance(value: number, startTime: number = this._audioContext.currentTime) {\n    this._highPass.Q.setValueAtTime(value, startTime);\n    this._lowPass.Q.setValueAtTime(value, startTime);\n    this._bandPassPeak.gain.setValueAtTime(value, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-7\n   * @param startTime\n   */\n  c64FilterType(value: number, startTime: number = this._audioContext.currentTime) {\n    const filterTypes: FilterMode[] = [];\n    if ((value & 1) !== 0) {\n      filterTypes.push('lowpass');\n    }\n    if ((value & 2) !== 0) {\n      filterTypes.push('bandpass');\n    }\n    if ((value & 4) !== 0) {\n      filterTypes.push('highpass');\n    }\n    this.filterType(filterTypes, startTime);\n  }\n  filterType(value: FilterMode[], startTime: number = this._audioContext.currentTime) {\n    if (value.includes('lowpass') && value.includes('bandpass') && value.includes('highpass')) {\n      this._in_out.gain.setValueAtTime(0, startTime);\n      this._in_low.gain.setValueAtTime(1, startTime);\n      this._in_band.gain.setValueAtTime(0, startTime);\n      this._in_high.gain.setValueAtTime(0, startTime);\n      this._low_band.gain.setValueAtTime(1, startTime);\n      this._low_high.gain.setValueAtTime(0, startTime);\n      this._band_high.gain.setValueAtTime(1, startTime);\n      this._low_out.gain.setValueAtTime(0, startTime);\n      this._band_out.gain.setValueAtTime(0, startTime);\n      this._high_out.gain.setValueAtTime(1, startTime);\n    } else if (value.includes('lowpass') && value.includes('bandpass')) {\n      this._in_out.gain.setValueAtTime(0, startTime);\n      this._in_low.gain.setValueAtTime(1, startTime);\n      this._in_band.gain.setValueAtTime(0, startTime);\n      this._in_high.gain.setValueAtTime(0, startTime);\n      this._low_band.gain.setValueAtTime(1, startTime);\n      this._low_high.gain.setValueAtTime(0, startTime);\n      this._band_high.gain.setValueAtTime(0, startTime);\n      this._low_out.gain.setValueAtTime(0, startTime);\n      this._band_out.gain.setValueAtTime(1, startTime);\n      this._high_out.gain.setValueAtTime(0, startTime);\n    } else if (value.includes('lowpass') && value.includes('highpass')) {\n      this._in_out.gain.setValueAtTime(0, startTime);\n      this._in_low.gain.setValueAtTime(1, startTime);\n      this._in_band.gain.setValueAtTime(0, startTime);\n      this._in_high.gain.setValueAtTime(0, startTime);\n      this._low_band.gain.setValueAtTime(0, startTime);\n      this._low_high.gain.setValueAtTime(1, startTime);\n      this._band_high.gain.setValueAtTime(0, startTime);\n      this._low_out.gain.setValueAtTime(0, startTime);\n      this._band_out.gain.setValueAtTime(0, startTime);\n      this._high_out.gain.setValueAtTime(1, startTime);\n    } else if (value.includes('bandpass') && value.includes('highpass')) {\n      this._in_out.gain.setValueAtTime(0, startTime);\n      this._in_low.gain.setValueAtTime(0, startTime);\n      this._in_band.gain.setValueAtTime(1, startTime);\n      this._in_high.gain.setValueAtTime(0, startTime);\n      this._low_band.gain.setValueAtTime(0, startTime);\n      this._low_high.gain.setValueAtTime(0, startTime);\n      this._band_high.gain.setValueAtTime(1, startTime);\n      this._low_out.gain.setValueAtTime(0, startTime);\n      this._band_out.gain.setValueAtTime(0, startTime);\n      this._high_out.gain.setValueAtTime(1, startTime);\n    } else if (value.includes('lowpass')) {\n      this._in_out.gain.setValueAtTime(0, startTime);\n      this._in_low.gain.setValueAtTime(1, startTime);\n      this._in_band.gain.setValueAtTime(0, startTime);\n      this._in_high.gain.setValueAtTime(0, startTime);\n      this._low_band.gain.setValueAtTime(0, startTime);\n      this._low_high.gain.setValueAtTime(0, startTime);\n      this._band_high.gain.setValueAtTime(0, startTime);\n      this._low_out.gain.setValueAtTime(1, startTime);\n      this._band_out.gain.setValueAtTime(0, startTime);\n      this._high_out.gain.setValueAtTime(0, startTime);\n    } else if (value.includes('bandpass')) {\n      this._in_out.gain.setValueAtTime(0, startTime);\n      this._in_low.gain.setValueAtTime(0, startTime);\n      this._in_band.gain.setValueAtTime(1, startTime);\n      this._in_high.gain.setValueAtTime(0, startTime);\n      this._low_band.gain.setValueAtTime(0, startTime);\n      this._low_high.gain.setValueAtTime(0, startTime);\n      this._band_high.gain.setValueAtTime(0, startTime);\n      this._low_out.gain.setValueAtTime(0, startTime);\n      this._band_out.gain.setValueAtTime(1, startTime);\n      this._high_out.gain.setValueAtTime(0, startTime);\n    } else if (value.includes('highpass')) {\n      this._in_out.gain.setValueAtTime(0, startTime);\n      this._in_low.gain.setValueAtTime(0, startTime);\n      this._in_band.gain.setValueAtTime(0, startTime);\n      this._in_high.gain.setValueAtTime(1, startTime);\n      this._low_band.gain.setValueAtTime(0, startTime);\n      this._low_high.gain.setValueAtTime(0, startTime);\n      this._band_high.gain.setValueAtTime(0, startTime);\n      this._low_out.gain.setValueAtTime(0, startTime);\n      this._band_out.gain.setValueAtTime(0, startTime);\n      this._high_out.gain.setValueAtTime(1, startTime);\n    } else {\n      this._in_out.gain.setValueAtTime(1, startTime);\n      this._in_low.gain.setValueAtTime(0, startTime);\n      this._in_band.gain.setValueAtTime(0, startTime);\n      this._in_high.gain.setValueAtTime(0, startTime);\n      this._low_band.gain.setValueAtTime(0, startTime);\n      this._low_high.gain.setValueAtTime(0, startTime);\n      this._band_high.gain.setValueAtTime(0, startTime);\n      this._low_out.gain.setValueAtTime(0, startTime);\n      this._band_out.gain.setValueAtTime(0, startTime);\n      this._high_out.gain.setValueAtTime(0, startTime);\n    }\n  }\n\n  connect(destination: AudioNode) {\n    this._outNode.connect(destination);\n  }\n\n  disconnect() {\n    this._outNode.disconnect();\n  }\n\n  reset(startTime: number = this._audioContext.currentTime) {\n    this._highPass.frequency.cancelScheduledValues(startTime);\n    this._highPass.frequency.setValueAtTime(0, startTime);\n    this._highPass.Q.cancelScheduledValues(startTime);\n    this._highPass.Q.setValueAtTime(1, startTime);\n    this._lowPass.frequency.cancelScheduledValues(startTime);\n    this._lowPass.frequency.setValueAtTime(0, startTime);\n    this._lowPass.Q.cancelScheduledValues(startTime);\n    this._lowPass.Q.setValueAtTime(1, startTime);\n    this._bandPass.frequency.cancelScheduledValues(startTime);\n    this._bandPass.frequency.setValueAtTime(0, startTime);\n    this._bandPassPeak.frequency.cancelScheduledValues(startTime);\n    this._bandPassPeak.frequency.setValueAtTime(0, startTime);\n    this._bandPassPeak.gain.cancelScheduledValues(startTime);\n    this._bandPassPeak.gain.setValueAtTime(1, startTime);\n    this._in_out.gain.cancelScheduledValues(startTime);\n    this._in_out.gain.setValueAtTime(1, startTime);\n    this._in_low.gain.cancelScheduledValues(startTime);\n    this._in_low.gain.setValueAtTime(0, startTime);\n    this._in_band.gain.cancelScheduledValues(startTime);\n    this._in_band.gain.setValueAtTime(0, startTime);\n    this._in_high.gain.cancelScheduledValues(startTime);\n    this._in_high.gain.setValueAtTime(0, startTime);\n    this._low_band.gain.cancelScheduledValues(startTime);\n    this._low_band.gain.setValueAtTime(0, startTime);\n    this._low_high.gain.cancelScheduledValues(startTime);\n    this._low_high.gain.setValueAtTime(0, startTime);\n    this._band_high.gain.cancelScheduledValues(startTime);\n    this._band_high.gain.setValueAtTime(0, startTime);\n    this._low_out.gain.cancelScheduledValues(startTime);\n    this._low_out.gain.setValueAtTime(0, startTime);\n    this._band_out.gain.cancelScheduledValues(startTime);\n    this._band_out.gain.setValueAtTime(0, startTime);\n    this._high_out.gain.cancelScheduledValues(startTime);\n    this._high_out.gain.setValueAtTime(0, startTime);\n  }\n}\n\nexport class Sid {\n  private _audioContext: AudioContext;\n  private _mainGain: GainNode;\n  private _oscillator: SidOscillator;\n  private _voice1: SidVoice;\n  private _voice2: SidVoice;\n  private _voice3: SidVoice;\n  private _filter: SidFilter;\n\n  private _v1_gain: GainNode;\n  private _v1_filter: GainNode;\n  private _v1_main: GainNode;\n  private _v2_gain: GainNode;\n  private _v2_filter: GainNode;\n  private _v2_main: GainNode;\n  private _v3_gain: GainNode;\n  private _v3_switch: GainNode;\n  private _v3_filter: GainNode;\n  private _v3_main: GainNode;\n\n  constructor(audioContext: AudioContext = new AudioContext()) {\n    this._audioContext = audioContext;\n    this._mainGain = new GainNode(audioContext, { gain: 1 });\n    this._oscillator = new SidOscillator(audioContext);\n    this._voice1 = new SidVoice(audioContext, this._oscillator.voice1Params);\n    this._voice2 = new SidVoice(audioContext, this._oscillator.voice2Params);\n    this._voice3 = new SidVoice(audioContext, this._oscillator.voice3Params);\n    this._filter = new SidFilter(audioContext);\n\n    this._v1_gain = new GainNode(audioContext, { gain: 1 / 3 });\n    this._v1_filter = new GainNode(audioContext, { gain: 0 });\n    this._v1_main = new GainNode(audioContext, { gain: 1 });\n    this._v2_gain = new GainNode(audioContext, { gain: 1 / 3 });\n    this._v2_filter = new GainNode(audioContext, { gain: 0 });\n    this._v2_main = new GainNode(audioContext, { gain: 1 });\n    this._v3_gain = new GainNode(audioContext, { gain: 1 / 3 });\n    this._v3_switch = new GainNode(audioContext, { gain: 1 });\n    this._v3_filter = new GainNode(audioContext, { gain: 0 });\n    this._v3_main = new GainNode(audioContext, { gain: 1 });\n\n    this._oscillator.connect(this._voice1.inNode, 0);\n    this._voice1.connect(this._v1_gain);\n    this._v1_gain.connect(this._v1_filter);\n    this._v1_filter.connect(this._filter.inNode);\n    this._v1_gain.connect(this._v1_main);\n    this._v1_main.connect(this._mainGain);\n    this._oscillator.connect(this._voice2.inNode, 1);\n    this._voice2.connect(this._v2_gain);\n    this._v2_gain.connect(this._v2_filter);\n    this._v2_filter.connect(this._filter.inNode);\n    this._v2_gain.connect(this._v2_main);\n    this._v2_main.connect(this._mainGain);\n    this._oscillator.connect(this._voice3.inNode, 2);\n    this._voice3.connect(this._v3_switch);\n    this._v3_switch.connect(this._v3_gain);\n    this._v3_gain.connect(this._v3_filter);\n    this._v3_filter.connect(this._filter.inNode);\n    this._v3_gain.connect(this._v3_main);\n    this._v3_main.connect(this._mainGain);\n    this._filter.connect(this._mainGain);\n  }\n\n  start(): Promise<void> {\n    return this._audioContext.resume();\n  }\n\n  get voice1(): SidVoice {\n    return this._voice1;\n  }\n\n  get voice2(): SidVoice {\n    return this._voice2;\n  }\n\n  get voice3(): SidVoice {\n    return this._voice3;\n  }\n\n  get voices(): SidVoice[] {\n    return [this._voice1, this._voice2, this._voice3];\n  }\n\n  get filter(): SidFilter {\n    return this._filter;\n  }\n\n  /**\n   *\n   * @param value 0-7\n   * @param startTime\n   */\n  c64FilterVoice(value: number, startTime: number = this._audioContext.currentTime) {\n    this.filterVoice(0, (value & 1) !== 0 ? 1 : 0, startTime);\n    this.filterVoice(1, (value & 2) !== 0 ? 1 : 0, startTime);\n    this.filterVoice(2, (value & 4) !== 0 ? 1 : 0, startTime);\n  }\n  filterVoice(voiceIndex: number, value: 0 | 1, startTime: number = this._audioContext.currentTime) {\n    switch (voiceIndex) {\n      case 0:\n        this._v1_filter.gain.setValueAtTime(value, startTime);\n        this._v1_main.gain.setValueAtTime(1 - value, startTime);\n        break;\n      case 1:\n        this._v2_filter.gain.setValueAtTime(value, startTime);\n        this._v2_main.gain.setValueAtTime(1 - value, startTime);\n        break;\n      case 2:\n        this._v3_filter.gain.setValueAtTime(value, startTime);\n        this._v3_main.gain.setValueAtTime(1 - value, startTime);\n        break;\n    }\n  }\n\n  /**\n   *\n   * @param value 0-1\n   * @param startTime\n   */\n  c64Voice3Off(value: number, startTime: number = this._audioContext.currentTime) {\n    this.voice3Off(Boolean(value), startTime);\n  }\n  voice3Off(value: boolean, startTime: number = this._audioContext.currentTime) {\n    this._v3_switch.gain.setValueAtTime(value ? 0 : 1, startTime);\n  }\n\n  /**\n   *\n   * @param value 0-15\n   * @param startTime\n   */\n  c64Volume(value: number, startTime: number = this._audioContext.currentTime) {\n    this.volume(value / 15, startTime);\n  }\n  volume(value: number, startTime: number = this._audioContext.currentTime) {\n    this._mainGain.gain.setValueAtTime(value, startTime);\n  }\n\n  connect(destination: AudioNode, output?: number, input?: number) {\n    this._mainGain.connect(destination, output, input);\n  }\n\n  disconnect() {\n    this._mainGain.disconnect();\n  }\n\n  reset(startTime: number = this._audioContext.currentTime) {\n    this._mainGain.gain.cancelScheduledValues(startTime);\n    this._mainGain.gain.setValueAtTime(1, startTime);\n    this._voice1.reset(startTime);\n    this._voice2.reset(startTime);\n    this._voice3.reset(startTime);\n    this._filter.reset(startTime);\n    this._v1_gain.gain.cancelScheduledValues(startTime);\n    this._v1_gain.gain.setValueAtTime(1 / 3, startTime);\n    this._v1_filter.gain.cancelScheduledValues(startTime);\n    this._v1_filter.gain.setValueAtTime(0, startTime);\n    this._v1_main.gain.cancelScheduledValues(startTime);\n    this._v1_main.gain.setValueAtTime(1, startTime);\n    this._v2_gain.gain.cancelScheduledValues(startTime);\n    this._v2_gain.gain.setValueAtTime(1 / 3, startTime);\n    this._v2_filter.gain.cancelScheduledValues(startTime);\n    this._v2_filter.gain.setValueAtTime(0, startTime);\n    this._v2_main.gain.cancelScheduledValues(startTime);\n    this._v2_main.gain.setValueAtTime(1, startTime);\n    this._v3_gain.gain.cancelScheduledValues(startTime);\n    this._v3_gain.gain.setValueAtTime(1 / 3, startTime);\n    this._v3_switch.gain.cancelScheduledValues(startTime);\n    this._v3_switch.gain.setValueAtTime(1, startTime);\n    this._v3_filter.gain.cancelScheduledValues(startTime);\n    this._v3_filter.gain.setValueAtTime(0, startTime);\n    this._v3_main.gain.cancelScheduledValues(startTime);\n    this._v3_main.gain.setValueAtTime(1, startTime);\n  }\n}\n","import { audioContext, Channel, connectMono, connectStereo, loadFile, NoteViz, reloadVoices } from './SidLoad';\nimport { Command } from './SidParse';\n\nconst keyDivs: HTMLDivElement[] = [];\nfor (let i = 0; i < 96; i++) keyDivs[i] = document.getElementById(`k${i}`) as HTMLDivElement;\nconst textLines: HTMLParagraphElement[] = [];\nfor (let i = 0; i < 5; i++) textLines[i] = document.getElementById(`line${i}`) as HTMLParagraphElement;\nconst channelSelect = document.getElementById('channelSelect') as HTMLSelectElement;\nconst leftFileSelect = document.getElementById('leftFileSelect') as HTMLSelectElement;\nconst leftOpenFileInput = document.getElementById('leftOpenFile') as HTMLInputElement;\nconst leftClearButton = document.getElementById('leftClear') as HTMLButtonElement;\nconst rightFileSelect = document.getElementById('rightFileSelect') as HTMLSelectElement;\nconst rightOpenFileInput = document.getElementById('rightOpenFile') as HTMLInputElement;\nconst rightClearButton = document.getElementById('rightClear') as HTMLButtonElement;\nconst playPauseButton = document.getElementById('playPause') as HTMLButtonElement;\nconst currentSpan = document.getElementById('current') as HTMLSpanElement;\nconst timeSlider = document.getElementById('timeslider') as HTMLInputElement;\nconst durationSpan = document.getElementById('duration') as HTMLSpanElement;\n\ntype State = {\n  selectedChannel: Channel;\n  isLoading: boolean;\n  isPlaying: boolean;\n  fileSelectValueLeft: string;\n  openFileValueLeft: string;\n  durationLeft: number;\n  voicesDataLeft: Command[][];\n  durationRight: number;\n  voicesDataRight: Command[][];\n  fileSelectValueRight: string;\n  openFileValueRight: string;\n  notes: NoteViz[][];\n  currentNotes: number[];\n  text: string[];\n  startTime: number;\n  currentTime: number;\n  audioContextStartTime: number;\n};\nconst internalState: State = {\n  selectedChannel: 'left',\n  isLoading: false,\n  isPlaying: false,\n  durationLeft: 0,\n  voicesDataLeft: [],\n  fileSelectValueLeft: '',\n  openFileValueLeft: '',\n  durationRight: 0,\n  voicesDataRight: [],\n  fileSelectValueRight: '',\n  openFileValueRight: '',\n  notes: [[], [], [], [], [], []],\n  currentNotes: [-1, -1, -1, -1, -1, -1],\n  text: [],\n  startTime: 0,\n  currentTime: 0,\n  audioContextStartTime: audioContext.currentTime,\n};\nconst handler: ProxyHandler<State> = {\n  set(target: State, property: keyof State, value: any) {\n    if (property === 'currentNotes') {\n      for (let i = 0; i < 6; i++) {\n        if (value[i] === -1)\n          clearKeyColor(\n            target.currentNotes[i] >= 0 && target.notes[i].length > 0\n              ? target.notes[i][target.currentNotes[i]].index\n              : -1\n          );\n      }\n    }\n    if (property === 'notes') {\n      for (let i = 0; i < 6; i++) {\n        if (value[i].length === 0)\n          clearKeyColor(\n            target.currentNotes[i] >= 0 && target.notes[i].length > 0\n              ? target.notes[i][target.currentNotes[i]].index\n              : -1\n          );\n      }\n    }\n\n    (target as any)[property] = value;\n\n    if (['notes', 'currentNotes', 'currentTime'].includes(property)) {\n      updateUiKeyboard();\n    }\n    if (['text'].includes(property)) {\n      updateUiText();\n    }\n    if (\n      [\n        'selectedChannel',\n        'fileSelectValueLeft',\n        'openFileValueLeft',\n        'fileSelectValueRight',\n        'openFileValueRight',\n      ].includes(property)\n    ) {\n      updateUiFileSelects();\n    }\n    if (\n      ['isLoading', 'isPlaying', 'durationLeft', 'voicesDataLeft', 'durationRight', 'currentTime'].includes(property)\n    ) {\n      updateUiPlayArea();\n    }\n    return true;\n  },\n};\nexport const state: State = new Proxy(internalState, handler);\n\nconst getDuration = (): number => Math.max(state.durationLeft, state.durationRight);\n\nconst getTimeString = (value: number): string => {\n  const mins = Math.floor(value / 60);\n  const secs = Math.floor(value - 60 * mins);\n  return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\n};\n\nconst updateUiKeyboard = () => {\n  for (let i = 0; i < 6; i++) {\n    if (state.notes[i].length !== 0) {\n      const currentTime = audioContext.currentTime;\n      const note: NoteViz | undefined = state.currentNotes[i] >= 0 ? state.notes[i][state.currentNotes[i]] : undefined;\n      if (!note || currentTime < note.start || currentTime >= note.stop) {\n        clearKeyColor((note && note.index) || -1);\n        let index: number = -1;\n        for (let j = 0; j < state.notes[i].length; j++) {\n          if (currentTime >= state.notes[i][j].start && currentTime < state.notes[i][j].stop) {\n            index = j;\n            break;\n          }\n        }\n        internalState.currentNotes[i] = index;\n        if (index > 0) setKeyColor(state.notes[i][index].index, i);\n      }\n    }\n  }\n};\nconst updateUiText = () => {\n  for (let i = 0; i < state.text.length; i++) textLines[i].textContent = state.text[i];\n  for (let i = state.text.length; i < 5; i++) textLines[i].textContent = '';\n};\nconst updateUiFileSelects = () => {\n  leftFileSelect.style.display = state.selectedChannel === 'right' ? 'none' : 'revert';\n  leftFileSelect.value = state.fileSelectValueLeft;\n  leftOpenFileInput.style.display = state.selectedChannel === 'right' ? 'none' : 'revert';\n  !state.openFileValueLeft && (leftOpenFileInput.value = state.openFileValueLeft);\n  leftClearButton.style.display = state.selectedChannel === 'right' ? 'none' : 'revert';\n  rightFileSelect.style.display = state.selectedChannel === 'right' ? 'revert' : 'none';\n  rightFileSelect.value = state.fileSelectValueRight;\n  rightOpenFileInput.style.display = state.selectedChannel === 'right' ? 'revert' : 'none';\n  !state.openFileValueRight && (rightOpenFileInput.value = state.openFileValueRight);\n  rightClearButton.style.display = state.selectedChannel === 'right' ? 'revert' : 'none';\n};\nconst updateUiPlayArea = () => {\n  playPauseButton.disabled = state.voicesDataLeft.length === 0 || state.isLoading;\n  state.isPlaying ? playPauseButton.classList.add('paused') : playPauseButton.classList.remove('paused');\n  currentSpan.textContent = getTimeString(state.currentTime);\n  timeSlider.disabled = state.voicesDataLeft.length === 0 || state.isLoading;\n  timeSlider.max = String(getDuration());\n  timeSlider.value = String(state.currentTime);\n  durationSpan.textContent = getTimeString(getDuration());\n};\n\nconst loadSidFile = async (channel: Channel, file: Blob) => {\n  pause();\n  state.isLoading = true;\n  state.isPlaying = false;\n  const { voicesData, duration, text, notes } = await loadFile(channel, file);\n  if (channel === 'right') {\n    state.durationRight = duration;\n    state.voicesDataRight = voicesData;\n    state.notes = [state.notes[0], state.notes[1], state.notes[2], notes[0], notes[1], notes[2]];\n    state.currentNotes = [state.currentNotes[0], state.currentNotes[1], state.currentNotes[2], -1, -1, -1];\n    connectStereo();\n  } else {\n    state.durationLeft = duration;\n    state.voicesDataLeft = voicesData;\n    state.notes = [notes[0], notes[1], notes[2], state.notes[3], state.notes[4], state.notes[5]];\n    state.currentNotes = [-1, -1, -1, state.currentNotes[3], state.currentNotes[4], state.currentNotes[5]];\n    state.text = text;\n  }\n  state.startTime = 0;\n  state.currentTime = 0;\n  state.audioContextStartTime = audioContext.currentTime;\n  state.isLoading = false;\n};\n\nconst clear = (channel: Channel) => {\n  pause();\n  state.isLoading = false;\n  state.isPlaying = false;\n  if (channel === 'right') {\n    state.durationRight = 0;\n    state.voicesDataRight = [];\n    state.fileSelectValueRight = '';\n    state.openFileValueRight = '';\n    state.notes = [state.notes[0], state.notes[1], state.notes[2], [], [], []];\n    state.currentNotes = [state.currentNotes[0], state.currentNotes[1], state.currentNotes[2], -1, -1, -1];\n  } else {\n    state.durationLeft = 0;\n    state.voicesDataLeft = [];\n    state.fileSelectValueLeft = '';\n    state.openFileValueLeft = '';\n    state.notes = [[], [], [], state.notes[3], state.notes[4], state.notes[5]];\n    state.currentNotes = [-1, -1, -1, state.currentNotes[3], state.currentNotes[4], state.currentNotes[5]];\n    state.text = ['Select a SID file'];\n  }\n  state.startTime = 0;\n  state.currentTime = 0;\n  state.audioContextStartTime = audioContext.currentTime;\n};\n\nchannelSelect.onchange = (e: Event) => {\n  state.selectedChannel = (e.target as HTMLSelectElement).value as Channel;\n};\n\nleftOpenFileInput.onchange = (e: Event) => {\n  // @ts-ignore\n  const value: string = e.target.value;\n  if (value) {\n    state.openFileValueLeft = value;\n    // @ts-ignore\n    const file: File = e.target.files[0];\n    file && loadSidFile('left', file);\n  } else {\n    clear('left');\n  }\n};\nrightOpenFileInput.onchange = (e: Event) => {\n  // @ts-ignore\n  const value: string = e.target.value;\n  if (value) {\n    state.openFileValueRight = value;\n    // @ts-ignore\n    const file: File = e.target.files[0];\n    file && loadSidFile('right', file);\n  } else {\n    clear('right');\n  }\n};\nleftFileSelect.onchange = async (e: Event) => {\n  // @ts-ignore\n  const value: string = e.target.value;\n  if (value) {\n    state.fileSelectValueLeft = value;\n    const response = await fetch(`sids/${value}.MUS.prg`);\n    const file = await response.blob();\n    loadSidFile('left', file);\n  } else {\n    clear('left');\n  }\n};\nrightFileSelect.onchange = async (e: Event) => {\n  // @ts-ignore\n  const value: string = e.target.value;\n  if (value) {\n    state.fileSelectValueRight = value;\n    const response = await fetch(`sids/${value}.MUS.prg`);\n    const file = await response.blob();\n    loadSidFile('right', file);\n  } else {\n    clear('right');\n    connectMono();\n  }\n};\nleftClearButton.onclick = () => {\n  clear('left');\n};\nrightClearButton.onclick = () => {\n  clear('right');\n  connectMono();\n};\n\nconst clearKeyColor = (index: number) => {\n  if (index < 0 || index >= keyDivs.length) return;\n  const color = [0, 2, 4, 5, 7, 9, 11].includes(index % 12)\n    ? 'linear-gradient(to bottom, #fff, #e0e0e0)'\n    : 'linear-gradient(to bottom, #222, #000)';\n  keyDivs[index].style.background = color;\n};\n// TODO rechte Farben anpassen\nconst colorMap: { [key: number]: string } = {\n  0: '#eeee77ff',\n  1: '#664400ff',\n  2: '#cc44ccff',\n  3: '#f8f8bfff',\n  4: '#ae9158ff',\n  5: '#df97dfff',\n};\nconst setKeyColor = (index: number, voiceIndex: number) => {\n  keyDivs[index].style.background = colorMap[voiceIndex];\n};\n\nconst play = () => {\n  // @ts-ignore\n  if (!updateKeyboardInterval) updateKeyboardInterval = setInterval(updateKeyboard, 20);\n  audioContext.resume();\n};\nconst pause = () => {\n  if (updateKeyboardInterval) {\n    clearInterval(updateKeyboardInterval);\n    updateKeyboardInterval = undefined;\n  }\n  audioContext.suspend();\n};\nplayPauseButton.onclick = () => {\n  if (state.isPlaying) {\n    pause();\n    state.isPlaying = false;\n  } else {\n    play();\n    state.isPlaying = true;\n  }\n};\n\nconst reloadSidFiles = (e: MouseEvent | TouchEvent) => {\n  state.isLoading = true;\n  // @ts-ignore\n  state.startTime = Number(e.target.value);\n  // @ts-ignore\n  state.currentTime = Number(e.target.value);\n  state.audioContextStartTime = audioContext.currentTime;\n  state.voicesDataLeft.length > 0 && reloadVoices('left', state.voicesDataLeft, state.startTime);\n  state.voicesDataRight.length > 0 && reloadVoices('right', state.voicesDataRight, state.startTime);\n  state.currentNotes = [-1, -1, -1, -1, -1, -1];\n  state.isLoading = false;\n};\ntimeSlider.onmousedown = (e: MouseEvent) => {\n  pause();\n};\ntimeSlider.ontouchstart = (e: TouchEvent) => {\n  pause();\n};\ntimeSlider.oninput = (e: Event) => {\n  // @ts-ignore\n  state.currentTime = Number(e.target.value);\n};\ntimeSlider.onmouseup = (e: MouseEvent) => {\n  reloadSidFiles(e);\n  if (state.isPlaying) play();\n};\ntimeSlider.ontouchend = (e: TouchEvent) => {\n  reloadSidFiles(e);\n  if (state.isPlaying) play();\n};\n\nlet updateKeyboardInterval: number | undefined;\nconst updateKeyboard = () => {\n  state.currentTime = state.startTime + audioContext.currentTime - state.audioContextStartTime;\n  if (state.currentTime > getDuration()) {\n    pause();\n    state.isPlaying = false;\n  }\n};\n","import {\n  FilterMode,\n  FREQUENCY_FACTOR,\n  getBandPassFrequency,\n  getBandPassValue,\n  getHighPassFrequency,\n  getHighPassValue,\n  getLowPassFrequency,\n  getLowPassValue,\n  Sid as SidClass,\n  SidFilter,\n  SidVoice,\n} from './C64Sid';\nimport { Command, Dotted, Duration, Modifier, Note, Octave, parseSid } from './SidParse';\n\nexport const audioContext = new AudioContext();\nawait audioContext.audioWorklet.addModule('C64SidProcessor.js');\nawait audioContext.suspend();\n\n// check for cancelAndHoldAtTime, not implemented in Mozilla Firefox\ntry {\n  const testGain = audioContext.createGain();\n  if (typeof testGain.gain.cancelAndHoldAtTime !== 'function')\n    throw new Error('Unsupported browser: cancelAndHoldAtTime not available.');\n} catch (e) {\n  console.error('Error during feature detection:', e);\n  document.getElementById('main-content')!.style.display = 'none';\n  document.getElementById('unsupported-message')!.style.display = 'block';\n  throw e;\n}\n\nconst sidLeft = new SidClass(audioContext);\nconst sidRight = new SidClass(audioContext);\nconst merger = new ChannelMergerNode(audioContext, { numberOfInputs: 2 });\nsidLeft.connect(audioContext.destination);\n\nexport const connectMono = () => {\n  sidLeft.connect(audioContext.destination);\n  sidRight.disconnect();\n  merger.disconnect();\n};\n\nexport const connectStereo = () => {\n  sidLeft.connect(merger, 0, 0);\n  sidRight.connect(merger, 0, 1);\n  merger.connect(audioContext.destination);\n};\n\nconst calcFrequency = (\n  note: Note,\n  modifier: Modifier,\n  octave: Octave,\n  detune: number,\n  transpose: number\n): { index: number; frequency: number } => {\n  if (note === 'rst') return { index: -1, frequency: 0 };\n  const noteMap: { [key in Note]: number } = { c: 0, d: 2, e: 4, f: 5, g: 7, a: 9, b: 11, rst: NaN };\n  let index: number = noteMap[note];\n  switch (modifier) {\n    case 'flt':\n      index--;\n      break;\n    case 'nat':\n    default:\n      break;\n    case 'shp':\n      index++;\n      break;\n    case 'dbl':\n      if (['g', 'f', 'd', 'c'].includes(note)) {\n        index += 2;\n      } else if (['a', 'b', 'e'].includes(note)) {\n        index -= 2;\n      }\n  }\n  index += 12 * octave;\n  index += transpose;\n  const frequency = 440 * 2 ** ((index - 57) / 12) + detune * FREQUENCY_FACTOR;\n  return { index, frequency };\n};\n\nconst calcDuration = (duration: Duration, dotted: Dotted, tempo: number, utilityDuration: number): number => {\n  let mod: number;\n  switch (duration) {\n    case 'whl':\n      mod = 4;\n      break;\n    case 'hlf':\n      mod = 2;\n      break;\n    case 'qtr':\n    default:\n      mod = 1;\n      break;\n    case '8th':\n      mod = 1 / 2;\n      break;\n    case '16th':\n      mod = 1 / 4;\n      break;\n    case '32nd':\n      mod = 1 / 8;\n      break;\n    case '64th':\n      mod = 1 / 16;\n      break;\n    case 'utl':\n      return utilityDuration / 60;\n  }\n  switch (dotted) {\n    case 'non':\n    default:\n      break;\n    case 'sgl':\n      mod *= 1.5;\n      break;\n    case 'dbl':\n      mod *= 1.75;\n      break;\n  }\n  return (60 / tempo) * mod;\n};\n\nconst setFrequencyPortamentoVibrato = (\n  voice: SidVoice,\n  startTime: number,\n  frequency: number,\n  duration: number,\n  portamento: { startFrequency: number; rate: number },\n  vibrato: { depth: number; rate: number }\n) => {\n  if (portamento.rate === 0 && vibrato.depth === 0) {\n    voice.frequency(frequency, startTime);\n  } else if (portamento.rate !== 0) {\n    const porRate = Math.sign(frequency - portamento.startFrequency) * portamento.rate * 60 * FREQUENCY_FACTOR;\n    if (Math.abs(frequency - portamento.startFrequency) >= Math.abs(porRate * duration)) {\n      const targetValue = portamento.startFrequency + porRate * duration;\n      voice.frequency(portamento.startFrequency, startTime);\n      voice.frequencyParam.linearRampToValueAtTime(targetValue, startTime + duration);\n    } else {\n      const porDuration = (frequency - portamento.startFrequency) / porRate;\n      voice.frequency(portamento.startFrequency, startTime);\n      voice.frequencyParam.linearRampToValueAtTime(frequency, startTime + porDuration);\n      if (vibrato.depth !== 0)\n        setFrequencyPortamentoVibrato(\n          voice,\n          startTime + porDuration,\n          frequency,\n          duration - porDuration,\n          { ...portamento, rate: 0 },\n          vibrato\n        );\n    }\n  } else {\n    const vibRate = vibrato.depth * 60 * FREQUENCY_FACTOR;\n    const upperFreq = frequency + vibrato.depth * FREQUENCY_FACTOR * vibrato.rate;\n    let time = 0;\n    let up = true;\n    voice.frequency(frequency, startTime);\n    do {\n      if (time + vibrato.rate / 60 < duration) {\n        time += vibrato.rate / 60;\n        if (up) {\n          voice.frequencyParam.linearRampToValueAtTime(upperFreq, startTime + time);\n          voice.frequency(upperFreq, startTime + time);\n        } else {\n          voice.frequencyParam.linearRampToValueAtTime(frequency, startTime + time);\n          voice.frequency(frequency, startTime + time);\n        }\n      } else {\n        if (up) {\n          voice.frequencyParam.linearRampToValueAtTime(frequency + vibRate * (duration - time), startTime + duration);\n          voice.frequency(frequency + vibRate * (duration - time), startTime + time);\n        } else {\n          voice.frequencyParam.linearRampToValueAtTime(upperFreq - vibRate * (duration - time), startTime + duration);\n          voice.frequency(upperFreq - vibRate * (duration - time), startTime + time);\n        }\n        time = duration;\n      }\n      up = !up;\n    } while (time < duration);\n  }\n};\n\nconst setPulseWidthSweep = (\n  voice: SidVoice,\n  startTime: number,\n  startValue: number,\n  sweepRate: number,\n  duration: number\n) => {\n  const rate = sweepRate * 60;\n  let time = 0;\n  let value = startValue;\n  voice.widthParam.setValueAtTime(startValue / 4095, startTime);\n  do {\n    if (rate > 0 && time + (4095 - value) / rate < duration) {\n      time += (4095 - value) / rate;\n      value = 0;\n      voice.widthParam.linearRampToValueAtTime(1, startTime + time);\n      voice.widthParam.setValueAtTime(0, startTime + time);\n    } else if (rate < 0 && time - value / rate < duration) {\n      time -= value / rate;\n      value = 4095;\n      voice.widthParam.linearRampToValueAtTime(0, startTime + time);\n      voice.widthParam.setValueAtTime(1, startTime + time);\n    } else {\n      voice.widthParam.linearRampToValueAtTime((value + rate * (duration - time)) / 4095, startTime + duration);\n      time = duration;\n    }\n  } while (time < duration);\n  voice.widthParam.setValueAtTime(startValue / 4095, startTime + duration);\n};\n\nconst getFilterSweepValues = (\n  startValue: number,\n  sweepRate: number,\n  duration: number,\n  calc: (value: number) => number\n): number[] => {\n  const endValue = startValue + sweepRate * duration;\n  const count = Math.max(Math.floor(duration * 60), 2);\n  const step = (endValue - startValue) / (count - 1);\n  const values: number[] = [];\n  let value = startValue;\n  for (let i = 0; i < count; i++) {\n    values.push(calc(value));\n    value += step;\n  }\n  return values;\n};\n\nconst setFilterFrequencyWidthSweep = (\n  filter: SidFilter,\n  startTime: number,\n  startValue: number,\n  sweepRate: number,\n  duration: number\n) => {\n  const rate = sweepRate * 60;\n  let time = 0;\n  let value = startValue;\n  filter.c64Frequency(startValue, startTime);\n  do {\n    if (rate > 0 && time + (2047 - value) / rate < duration) {\n      const dur = (2047 - value) / rate;\n      filter.lowPassFilter.frequency.setValueCurveAtTime(\n        getFilterSweepValues(value, rate, dur, getLowPassFrequency),\n        startTime + time,\n        dur\n      );\n      filter.highPassFilter.frequency.setValueCurveAtTime(\n        getFilterSweepValues(value, rate, dur, getHighPassFrequency),\n        startTime + time,\n        dur\n      );\n      const bandPassValues = getFilterSweepValues(value, rate, dur, getBandPassFrequency);\n      filter.bandPassFilter.frequency.setValueCurveAtTime(bandPassValues, startTime + time, dur);\n      filter.bandPassPeakFilter.frequency.setValueCurveAtTime(bandPassValues, startTime + time, dur);\n      time += dur;\n      value = 0;\n    } else if (rate < 0 && time - value / rate < duration) {\n      const dur = -value / rate;\n      filter.lowPassFilter.frequency.setValueCurveAtTime(\n        getFilterSweepValues(value, rate, dur, getLowPassFrequency),\n        startTime + time,\n        dur\n      );\n      filter.highPassFilter.frequency.setValueCurveAtTime(\n        getFilterSweepValues(value, rate, dur, getHighPassFrequency),\n        startTime + time,\n        dur\n      );\n      const bandPassValues = getFilterSweepValues(value, rate, dur, getBandPassFrequency);\n      filter.bandPassFilter.frequency.setValueCurveAtTime(bandPassValues, startTime + time, dur);\n      filter.bandPassPeakFilter.frequency.setValueCurveAtTime(bandPassValues, startTime + time, dur);\n      time += dur;\n      value = 2047;\n    } else {\n      // -0.000001 otherwise Failed to execute 'setValueAtTime' on 'AudioParam': setValueAtTime(730.956, 1.8) overlaps setValueCurveAtTime(..., 1.476253236565001, 0.3237467634349995)\n      const dur = duration - time - 0.000001;\n      filter.lowPassFilter.frequency.setValueCurveAtTime(\n        getFilterSweepValues(value, rate, dur, getLowPassFrequency),\n        startTime + time,\n        dur\n      );\n      filter.highPassFilter.frequency.setValueCurveAtTime(\n        getFilterSweepValues(value, rate, dur, getHighPassFrequency),\n        startTime + time,\n        dur\n      );\n      const bandPassValues = getFilterSweepValues(value, rate, dur, getBandPassFrequency);\n      filter.bandPassFilter.frequency.setValueCurveAtTime(bandPassValues, startTime + time, dur);\n      filter.bandPassPeakFilter.frequency.setValueCurveAtTime(bandPassValues, startTime + time, dur);\n      time = duration;\n    }\n  } while (time < duration);\n  filter.c64Frequency(startValue, startTime + duration);\n};\n\nconst setAutoFilterFrequency = (\n  filter: SidFilter,\n  startTime: number,\n  noteFrequency: number,\n  autoFilter: number,\n  filterModes: FilterMode[]\n): number => {\n  // TODO that's probably incorrect, but difficult to determine\n  const filterFrequency = 2 * noteFrequency;\n  let filterValue = filterModes.includes('lowpass')\n    ? getLowPassValue(filterFrequency)\n    : filterModes.includes('highpass')\n    ? getHighPassValue(filterFrequency)\n    : getBandPassValue(filterFrequency);\n  filterValue = Math.max(Math.min(filterValue + autoFilter, 2047), 0);\n  filter.c64Frequency(filterValue, startTime);\n  return filterValue;\n};\n\nconst initVoices = (sid: SidClass) => {\n  const voices = sid.voices;\n  for (let i = 0; i < voices.length; i++) {\n    voices[i].c64Waveform(4);\n    voices[i].c64AttackDuration(2);\n    voices[i].c64DecayDuration(0);\n    voices[i].c64SustainLevel(15);\n    voices[i].c64ReleaseDuration(5);\n    voices[i].c64PulseWidth(2048);\n  }\n  sid.c64Volume(8);\n};\n\nconst logVoices = (voicesData: Command[][]) => {\n  for (let i = 0; i < voicesData.length; i++) {\n    for (let j = 0; j < voicesData[i].length; j++) {\n      const cmd = voicesData[i][j];\n      console.log(JSON.stringify({ voice: i, index: j }), JSON.stringify(cmd));\n    }\n  }\n};\n\ntype CommandPointer = { voice: number; index: number };\ntype PhraseDefinition = { index: number; pointer: CommandPointer };\nexport type NoteViz = { start: number; stop: number; index: number };\n\nconst loadVoices = (\n  sid: SidClass,\n  voicesData: Command[][],\n  startTime: number\n): { duration: number; notes: NoteViz[][] } => {\n  const voices = sid.voices;\n  initVoices(sid);\n\n  const notes: NoteViz[][] = [[], [], []];\n\n  const currentTime = audioContext.currentTime;\n  let globalTime = currentTime;\n  let tempo = 100;\n  let volume = 8;\n  let utilityDuration = 12;\n\n  const voicesVars: Array<{\n    cmdPointer: CommandPointer;\n    callStack: { pointer: CommandPointer; cmd: 'def' | 'cal' }[];\n    hed: { pointer: CommandPointer; count: number };\n    time: number;\n    releasePoint: number;\n    detune: number;\n    transpose: number;\n    tie: boolean;\n    portamentoRate: number;\n    portamentoStartFrequency: number;\n    pulseWidth: number;\n    pulseWidthSweepRate: number;\n    vibratoRate: number;\n    vibratoDepth: number;\n    filter: FilterMode[];\n    filterFrequency: number;\n    filterFrequencySweepRate: number;\n    autoFilter: number;\n    halt: boolean;\n  }> = [];\n  for (let i = 0; i < voices.length; i++) {\n    voicesVars.push({\n      cmdPointer: { voice: i, index: 0 },\n      callStack: [],\n      hed: { pointer: { voice: i, index: 0 }, count: 1 },\n      time: currentTime,\n      releasePoint: 4,\n      detune: 0,\n      transpose: 0,\n      tie: false,\n      portamentoRate: 0,\n      portamentoStartFrequency: 0,\n      pulseWidth: 2048,\n      pulseWidthSweepRate: 0,\n      vibratoRate: 0,\n      vibratoDepth: 0,\n      filter: [],\n      filterFrequency: 0,\n      filterFrequencySweepRate: 0,\n      autoFilter: 0,\n      halt: false,\n    });\n  }\n\n  let voiceIndex = 0;\n\n  const phrases: PhraseDefinition[] = [];\n  for (let i = 0; i < voicesData.length; i++) {\n    for (let j = 0; j < voicesData[i].length; j++) {\n      const cmd = voicesData[i][j];\n      if (cmd.type === 'def') phrases.push({ index: cmd.data.value, pointer: { voice: i, index: j } });\n    }\n  }\n\n  do {\n    let {\n      cmdPointer,\n      callStack,\n      hed,\n      time,\n      releasePoint,\n      detune,\n      transpose,\n      tie,\n      portamentoRate,\n      portamentoStartFrequency,\n      pulseWidth,\n      pulseWidthSweepRate,\n      vibratoRate,\n      vibratoDepth,\n      filter,\n      filterFrequency,\n      filterFrequencySweepRate,\n      autoFilter,\n      halt,\n    } = voicesVars[voiceIndex];\n    while (!halt && cmdPointer.index < voicesData[cmdPointer.voice].length && time <= globalTime) {\n      const cmd = voicesData[cmdPointer.voice][cmdPointer.index];\n      // console.log(JSON.stringify(voiceIndex), JSON.stringify(cmdPointer), JSON.stringify(cmd));\n      switch (cmd.type) {\n        case 'tem':\n          tempo = cmd.data.value;\n          break;\n        case 'utl':\n          utilityDuration = cmd.data.value;\n          break;\n        case 'vol':\n          volume = cmd.data.value;\n          sid.c64Volume(volume, Math.max(time - startTime, currentTime));\n          break;\n        case 'bmp':\n          if (cmd.data.value === 'up' && volume < 15) volume++;\n          if (cmd.data.value === 'down' && volume > 0) volume--;\n          sid.c64Volume(volume, Math.max(time - startTime, currentTime));\n          break;\n        case 'hed':\n          hed = { pointer: { ...cmdPointer }, count: cmd.data.value - 1 };\n          break;\n        case 'tal':\n          if (hed.count > 0) {\n            cmdPointer = { ...hed.pointer };\n            hed.count--;\n          }\n          break;\n        case 'cal':\n          const phrase = phrases.find((phr) => phr.index === cmd.data.value);\n          if (!phrase) throw new Error(`UNDEFINED PHRASE CALL: ${JSON.stringify(cmdPointer)}, ${JSON.stringify(cmd)}`);\n          callStack.push({ pointer: { ...cmdPointer }, cmd: 'cal' });\n          if (callStack.length > 255)\n            throw new Error(`STACK OVERFLOW: ${JSON.stringify(cmdPointer)}, ${JSON.stringify(cmd)}`);\n          cmdPointer = { ...phrase.pointer };\n          break;\n        case 'def':\n          callStack.push({ pointer: { ...cmdPointer }, cmd: 'def' });\n          if (callStack.length > 255)\n            throw new Error(`STACK OVERFLOW: ${JSON.stringify(cmdPointer)}, ${JSON.stringify(cmd)}`);\n          break;\n        case 'end':\n          if (callStack.length === 0)\n            throw new Error(`STACK UNDERFLOW: ${JSON.stringify(cmdPointer)}, ${JSON.stringify(cmd)}`);\n          const pointer = callStack.pop()!;\n          if (pointer.cmd === 'cal') cmdPointer = { ...pointer.pointer };\n          break;\n        case 'f-m':\n          filter = cmd.data.value.slice();\n          sid.filter.filterType(cmd.data.value, Math.max(time - startTime, currentTime));\n          break;\n        case 'aut':\n          autoFilter = cmd.data.value;\n          break;\n        case 'res':\n          sid.filter.c64Resonance(cmd.data.value, Math.max(time - startTime, currentTime));\n          break;\n        case 'flt':\n          sid.filterVoice(voiceIndex, cmd.data.value === 'yes' ? 1 : 0, Math.max(time - startTime, currentTime));\n          break;\n        case 'f-s':\n          filterFrequencySweepRate = cmd.data.value;\n          break;\n        case 'f-c':\n          filterFrequency = cmd.data.value * 8;\n          sid.filter.c64Frequency(filterFrequency, Math.max(time - startTime, currentTime));\n          break;\n        case 'f-x':\n          // If you want to pass the external audio signal through the filter, use the F-X command.\n          break;\n        case 'atk':\n          voices[voiceIndex].c64AttackDuration(cmd.data.value, Math.max(time - startTime, currentTime));\n          break;\n        case 'dcy':\n          voices[voiceIndex].c64DecayDuration(cmd.data.value, Math.max(time - startTime, currentTime));\n          break;\n        case 'sus':\n          voices[voiceIndex].c64SustainLevel(cmd.data.value, Math.max(time - startTime, currentTime));\n          break;\n        case 'rls':\n          voices[voiceIndex].c64ReleaseDuration(cmd.data.value, Math.max(time - startTime, currentTime));\n          break;\n        case 'pnt':\n          releasePoint = cmd.data.value;\n          break;\n        case 'wav':\n          voices[voiceIndex].waveform(cmd.data.value, Math.max(time - startTime, currentTime));\n          break;\n        case 'p-w':\n          pulseWidth = cmd.data.value;\n          voices[voiceIndex].c64PulseWidth(pulseWidth, Math.max(time - startTime, currentTime));\n          break;\n        case 'p-s':\n          pulseWidthSweepRate = cmd.data.value;\n          break;\n        case 'snc':\n          voices[voiceIndex].sync(cmd.data.value === 'yes', Math.max(time - startTime, currentTime));\n          break;\n        case 'rng':\n          voices[voiceIndex].rng(cmd.data.value === 'yes', Math.max(time - startTime, currentTime));\n          break;\n        case 'vdp':\n          vibratoDepth = cmd.data.value;\n          break;\n        case 'vrt':\n          vibratoRate = cmd.data.value;\n          break;\n        case 'por':\n          portamentoRate = cmd.data.value;\n          break;\n        case 'dtn':\n          detune = cmd.data.value;\n          break;\n        case 'tps':\n          transpose = cmd.data.value;\n          break;\n        case 'ms#':\n          // Measure markers have no effect when a voice is played and are used strictly for editing purposes.\n          break;\n        case '3-O':\n          sid.voice3Off(cmd.data.value === 'yes', Math.max(time - startTime, currentTime));\n          break;\n        case 'flg':\n          // For communication from Sidplayer to the BASIC program, the FLG command is available.\n          break;\n        case 'hlt':\n          halt = true;\n          break;\n        case 'aux':\n          // The AUX command is reserved for possible future expansion. At present, this command is ignored by Sidplayer.\n          break;\n        case 'note':\n          const { index: noteIndex, frequency: noteFrequency } = calcFrequency(\n            cmd.data.note,\n            cmd.data.modifier,\n            cmd.data.octave,\n            detune,\n            transpose\n          );\n          const duration = calcDuration(cmd.data.duration, cmd.data.dotted, tempo, utilityDuration);\n          if (time >= currentTime + startTime && noteFrequency !== 0) {\n            setFrequencyPortamentoVibrato(\n              voices[voiceIndex],\n              time - startTime,\n              noteFrequency,\n              duration,\n              { startFrequency: portamentoStartFrequency, rate: portamentoRate },\n              { depth: vibratoDepth, rate: vibratoRate }\n            );\n            if (pulseWidthSweepRate !== 0)\n              setPulseWidthSweep(voices[voiceIndex], time - startTime, pulseWidth, pulseWidthSweepRate, duration);\n            if (autoFilter !== 0)\n              filterFrequency = setAutoFilterFrequency(sid.filter, time - startTime, noteFrequency, autoFilter, filter);\n            if (filterFrequencySweepRate !== 0)\n              setFilterFrequencyWidthSweep(\n                sid.filter,\n                time - startTime,\n                filterFrequency,\n                filterFrequencySweepRate,\n                duration\n              );\n            if (!tie) voices[voiceIndex].start(time - startTime);\n            tie = cmd.data.tie;\n            if (!tie) voices[voiceIndex].stop(time - startTime + Math.max(duration - releasePoint / 60, 0));\n            // fill notes for display during playback\n            if (noteIndex >= 0 && noteIndex <= 95)\n              notes[voiceIndex].push({\n                start: time - startTime,\n                stop: time - startTime + Math.max(duration - releasePoint / 60, 0),\n                index: noteIndex,\n              });\n          }\n          time += duration;\n          portamentoStartFrequency = noteFrequency;\n          break;\n        case 'abs':\n          const { frequency: absFrequency } = calcFrequency(\n            cmd.data.note,\n            cmd.data.modifier,\n            cmd.data.octave,\n            detune,\n            transpose\n          );\n          portamentoStartFrequency = absFrequency;\n          break;\n        default:\n          console.error(`${cmd.type} not implemented`);\n          break;\n      }\n      cmdPointer.index++;\n    }\n    voicesVars[voiceIndex] = {\n      cmdPointer,\n      callStack,\n      hed,\n      time,\n      releasePoint,\n      detune,\n      transpose,\n      tie,\n      portamentoRate,\n      portamentoStartFrequency,\n      pulseWidth,\n      pulseWidthSweepRate,\n      vibratoRate,\n      vibratoDepth,\n      filter,\n      filterFrequency,\n      filterFrequencySweepRate,\n      autoFilter,\n      halt,\n    };\n    if (time > globalTime) globalTime = time;\n    voiceIndex++;\n    if (voiceIndex >= voices.length) voiceIndex = 0;\n  } while (voicesVars.some((v) => !v.halt && v.cmdPointer.index < voicesData[v.cmdPointer.voice].length));\n\n  return { duration: Math.floor(Math.max(...voicesVars.map((v) => v.time - currentTime)) * 10) / 10, notes };\n};\n\nexport type Channel = 'left' | 'right';\n\nexport const loadFile = async (\n  channel: Channel,\n  file: Blob\n): Promise<{ voicesData: Command[][]; duration: number; text: string[]; notes: NoteViz[][] }> => {\n  const sidData = await parseSid(file);\n  const { duration, notes } = reloadVoices(channel, sidData.voices, 0);\n  return { voicesData: sidData.voices, duration, text: sidData.text, notes };\n};\n\nexport const reloadVoices = (\n  channel: Channel,\n  voicesData: Command[][],\n  startTime: number\n): { duration: number; notes: NoteViz[][] } => {\n  const sid = channel === 'right' ? sidRight : sidLeft;\n  sid.reset(0);\n  // logVoices(voicesData);\n  return loadVoices(sid, voicesData, startTime);\n};\n","export type Duration = 'whl' | 'hlf' | 'qtr' | '8th' | '16th' | '32nd' | '64th' | 'utl' | 'utv';\nexport type Dotted = 'non' | 'sgl' | 'dbl';\nexport type Modifier = 'flt' | 'nat' | 'shp' | 'dbl';\nexport type Octave = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\nexport type Note = 'c' | 'd' | 'e' | 'f' | 'g' | 'a' | 'b' | 'rst';\nexport type Waveform = 'pulse' | 'triangle' | 'sawtooth' | 'noise';\nexport type FilterMode = 'lowpass' | 'bandpass' | 'highpass';\nexport type Command =\n  | { type: 'tal' | 'end' | 'hlt' }\n  | {\n      type: 'abs' | 'note';\n      data: {\n        duration: Duration;\n        dotted: Dotted;\n        tie: boolean;\n        modifier: Modifier;\n        octave: Octave;\n        note: Note;\n      };\n    }\n  | {\n      type:\n        | 'dcy'\n        | 'rup'\n        | 'cal'\n        | 'def'\n        | 'atk'\n        | 'sus'\n        | 'lfo'\n        | 'rdn'\n        | 'rls'\n        | 'res'\n        | 'vol'\n        | 'src'\n        | 'dst'\n        | 'p-w'\n        | 'tem'\n        | 'utl'\n        | 'pnt'\n        | 'hed'\n        | 'flg'\n        | 'p-s'\n        | 'f-s'\n        | 'sca'\n        | 'vdp'\n        | 'vrt'\n        | 'aut'\n        | 'aux'\n        | 'pvd'\n        | 'pvr'\n        | 'max'\n        | 'utv'\n        | 'f-c'\n        | 'hld'\n        | 'ms#'\n        | 'jif'\n        | 'dtn'\n        | 'por'\n        | 'tps';\n      data: { value: number };\n    }\n  | { type: 'bmp'; data: { value: 'up' | 'down' } }\n  | {\n      type: 'flt' | 'rng' | 'snc' | 'f-x' | 'p&v' | '3-O';\n      data: { value: 'yes' | 'no' };\n    }\n  | { type: 'wav'; data: { value: Waveform[] } }\n  | { type: 'f-m'; data: { value: FilterMode[] } }\n  | { type: 'rtp'; data: { octaves: number; halfsteps: number } };\n\nconst getCommand = (byte1: number, byte2: number): Command | undefined => {\n  if ((byte1 & 3) === 0) {\n    // Note\n    let duration: Duration;\n    switch (byte1 & 31) {\n      case 0:\n        duration = '64th';\n        break;\n      case 28:\n        duration = '32nd';\n        break;\n      case 24:\n        duration = '16th';\n        break;\n      case 20:\n        duration = '8th';\n        break;\n      case 16:\n        duration = 'qtr';\n        break;\n      case 12:\n        duration = 'hlf';\n        break;\n      case 8:\n      default:\n        duration = 'whl';\n        break;\n    }\n    let dotted: Dotted;\n    switch (byte1 & 163) {\n      case 32:\n        dotted = 'sgl';\n        break;\n      case 160:\n        dotted = 'dbl';\n        break;\n      default:\n        dotted = 'non';\n        break;\n    }\n    const tie: boolean = (byte1 & 67) === 64;\n    if ((byte1 & 63) === 4) duration = 'utl';\n    if ((byte1 & 63) === 36) duration = 'utv';\n    if ((byte1 & 163) === 128) console.warn('triplet not implemented');\n    if ((byte1 & 191) === 160) console.warn('triplet 64th note not implemented');\n\n    let modifier: Modifier;\n    switch (byte2 & 192) {\n      case 192:\n        modifier = 'flt';\n        break;\n      case 128:\n      default:\n        modifier = 'nat';\n        break;\n      case 64:\n        modifier = 'shp';\n        break;\n      case 0:\n        modifier = 'dbl';\n        break;\n    }\n    let octave: Octave;\n    switch (byte2 & 56) {\n      case 56:\n        octave = 0;\n        break;\n      case 48:\n        octave = 1;\n        break;\n      case 40:\n        octave = 2;\n        break;\n      case 32:\n        octave = 3;\n        break;\n      case 24:\n      default:\n        octave = 4;\n        break;\n      case 16:\n        octave = 5;\n        break;\n      case 8:\n        octave = 6;\n        break;\n      case 0:\n        octave = 7;\n        break;\n    }\n    let note: Note;\n    switch (byte2 & 7) {\n      case 7:\n        note = 'b';\n        break;\n      case 6:\n        note = 'a';\n        break;\n      case 5:\n        note = 'g';\n        break;\n      case 4:\n        note = 'f';\n        break;\n      case 3:\n        note = 'e';\n        break;\n      case 2:\n        note = 'd';\n        break;\n      case 1:\n      default:\n        note = 'c';\n        break;\n      case 0:\n        note = 'rst';\n        break;\n    }\n    return {\n      type: byte1 === 0 ? 'abs' : 'note',\n      data: { duration, dotted, tie, modifier, octave, note },\n    };\n  } else if (byte1 === 1) {\n    if ((byte2 & 15) === 0) {\n      // Decay rate 0-15, default 0\n      return { type: 'dcy', data: { value: (byte2 & 240) >>> 4 } };\n    }\n    if ((byte2 & 7) === 1) {\n      return { type: 'rup', data: { value: (byte2 & 248) >>> 3 } };\n    }\n    if ((byte2 & 15) === 2) {\n      // Call phrase 0-15, not defined phrase -> UNDEFINED PHRASE CALL, nesting possible 4 times\n      // more -> STACK OVERFLOW, calling phrases from a different voice is possible\n      return { type: 'cal', data: { value: (byte2 & 240) >>> 4 } };\n    }\n    if (byte2 === 3) {\n      // Increase volume\n      return { type: 'bmp', data: { value: 'up' } };\n    }\n    if (byte2 === 19) {\n      // Filter voice\n      return { type: 'flt', data: { value: 'no' } };\n    }\n    if (byte2 === 35) {\n      // Ring modulation off\n      return { type: 'rng', data: { value: 'no' } };\n    }\n    if (byte2 === 51) {\n      // Synchronisation off\n      return { type: 'snc', data: { value: 'no' } };\n    }\n    if (byte2 === 67) {\n      // Filter external audio off\n      return { type: 'f-x', data: { value: 'no' } };\n    }\n    if (byte2 === 83) {\n      // Voice 3 on\n      return { type: '3-O', data: { value: 'no' } };\n    }\n    if ((byte2 & 143) === 131) {\n      // Define phrase 0-15, phrases can be defined inside another, phrase definition is 1\n      // nesting level, phrases can be redefined\n      return { type: 'def', data: { value: ((byte2 & 240) >>> 4) + 8 } };\n    }\n    if ((byte2 & 135) === 4) {\n      // Attack rate 0-15, default 2\n      return { type: 'atk', data: { value: (byte2 & 120) >>> 3 } };\n    }\n    if ((byte2 & 135) === 132) {\n      // Sustain level 0-15, default 15\n      return { type: 'sus', data: { value: (byte2 & 120) >>> 3 } };\n    }\n    if (byte2 === 99) {\n      return { type: 'lfo', data: { value: 0 } };\n    }\n    if (byte2 === 115) {\n      return { type: 'p&v', data: { value: 'no' } };\n    }\n    if ((byte2 & 7) === 5) {\n      return { type: 'rdn', data: { value: (byte2 & 248) >>> 3 } };\n    }\n    if ((byte2 & 15) === 6) {\n      // Define phrase 0-15\n      return { type: 'def', data: { value: (byte2 & 240) >>> 4 } };\n    }\n    if ((byte2 & 31) === 7) {\n      let value: Waveform[];\n      switch (byte2 & 224) {\n        case 0:\n          value = ['noise'];\n          break;\n        case 32:\n        default:\n          value = ['triangle'];\n          break;\n        case 64:\n          value = ['sawtooth'];\n          break;\n        case 96:\n          value = ['triangle', 'sawtooth'];\n          break;\n        case 128:\n          value = ['pulse'];\n          break;\n        case 160:\n          value = ['pulse', 'triangle'];\n          break;\n        case 192:\n          value = ['pulse', 'sawtooth'];\n          break;\n        case 224:\n          value = ['pulse', 'triangle', 'sawtooth'];\n          break;\n      }\n      // Waveform, default pulse\n      return { type: 'wav', data: { value } };\n    }\n    if ((byte2 & 31) === 23) {\n      let value: FilterMode[];\n      switch (byte2 & 224) {\n        case 0:\n        default:\n          value = [];\n          break;\n        case 32:\n          value = ['lowpass'];\n          break;\n        case 64:\n          value = ['bandpass'];\n          break;\n        case 96:\n          value = ['lowpass', 'bandpass'];\n          break;\n        case 128:\n          value = ['highpass'];\n          break;\n        case 160:\n          value = ['highpass', 'lowpass'];\n          break;\n        case 192:\n          value = ['highpass', 'bandpass'];\n          break;\n        case 224:\n          value = ['highpass', 'lowpass', 'bandpass'];\n          break;\n      }\n      // Filter mode\n      return { type: 'f-m', data: { value } };\n    }\n    if ((byte2 & 15) === 8) {\n      // Release rate 0-15, default 5\n      return { type: 'rls', data: { value: (byte2 & 240) >>> 4 } };\n    }\n    if ((byte2 & 15) === 10) {\n      // Filter resonance 0-15\n      return { type: 'res', data: { value: (byte2 & 240) >>> 4 } };\n    }\n    if (byte2 === 11) {\n      // Decrease volume\n      return { type: 'bmp', data: { value: 'down' } };\n    }\n    if (byte2 === 27) {\n      // Filter voice\n      return { type: 'flt', data: { value: 'yes' } };\n    }\n    if (byte2 === 43) {\n      // Ring modulation on\n      return { type: 'rng', data: { value: 'yes' } };\n    }\n    if (byte2 === 59) {\n      // Synchronisation on\n      return { type: 'snc', data: { value: 'yes' } };\n    }\n    if (byte2 === 75) {\n      // Filter external audio on\n      return { type: 'f-x', data: { value: 'yes' } };\n    }\n    if (byte2 === 91) {\n      // Voice 3 off\n      return { type: '3-O', data: { value: 'yes' } };\n    }\n    if (byte2 === 107) {\n      return { type: 'lfo', data: { value: 1 } };\n    }\n    if (byte2 === 123) {\n      return { type: 'p&v', data: { value: 'yes' } };\n    }\n    if ((byte2 & 143) === 139) {\n      // Call phrase 0-15\n      return { type: 'cal', data: { value: ((byte2 & 240) >>> 4) + 8 } };\n    }\n    if ((byte2 & 15) === 14) {\n      // Volume 0-15, default 8\n      return { type: 'vol', data: { value: (byte2 & 240) >>> 4 } };\n    }\n    if (byte2 === 15) {\n      // Repeat tail, tal without previous hed -> infinite loop to most recent hed/beginning\n      return { type: 'tal' };\n    }\n    if (byte2 === 47) {\n      // End phrase, end without previous def -> STACK UNDERFLOW\n      return { type: 'end' };\n    }\n    if (byte2 === 79) {\n      return { type: 'hlt' };\n    }\n    if ((byte2 & 159) === 31) {\n      return { type: 'src', data: { value: (byte2 & 96) >>> 5 } };\n    }\n    if ((byte2 & 143) === 143) {\n      let value: number;\n      switch (byte2 & 112) {\n        case 0:\n        default:\n          value = 0;\n          break;\n        case 32:\n          value = 1;\n          break;\n        case 80:\n          value = 2;\n          break;\n        case 96:\n          value = 3;\n          break;\n      }\n      return { type: 'dst', data: { value } };\n    }\n  } else {\n    if ((byte1 & 15) === 2) {\n      // Pulse width 0-4095, default 2048\n      return { type: 'p-w', data: { value: ((byte1 & 240) << 4) + byte2 } };\n    }\n    if (byte1 === 6) {\n      // Tempo 56-900, default 100\n      return {\n        type: 'tem',\n        data: { value: Math.trunc(14400 / (byte2 !== 0 ? byte2 : 256)) },\n      };\n    }\n    if (byte1 === 22) {\n      // Utility duration 1-256, default 12\n      return { type: 'utl', data: { value: byte2 !== 0 ? byte2 : 256 } };\n    }\n    if (byte1 === 38) {\n      // Release point 0-255, default 4\n      return { type: 'pnt', data: { value: byte2 } };\n    }\n    if (byte1 === 54) {\n      // Repeat head 0-255, 0 -> infinite, no nesting of hed/tal\n      return { type: 'hed', data: { value: byte2 } };\n    }\n    if (byte1 === 70) {\n      return { type: 'flg', data: { value: byte2 } };\n    }\n    if (byte1 === 86) {\n      // Pulse width sweeping -127-127\n      return { type: 'p-s', data: { value: (byte2 << 24) >> 24 } };\n    }\n    if (byte1 === 102) {\n      // Filter sweep -127-127\n      return { type: 'f-s', data: { value: (byte2 << 24) >> 24 } };\n    }\n    if (byte1 === 110) {\n      return { type: 'sca', data: { value: (byte2 << 24) >> 24 } };\n    }\n    if (byte1 === 118) {\n      // Vibrato depth 0-255\n      return { type: 'vdp', data: { value: byte2 } };\n    }\n    if (byte1 === 134) {\n      // Vibrato rate 1-256\n      return { type: 'vrt', data: { value: byte2 !== 0 ? byte2 : 256 } };\n    }\n    if (byte1 === 150) {\n      // Auto filter voice -127-127\n      return { type: 'aut', data: { value: (byte2 << 24) >> 24 } };\n    }\n    if (byte1 === 166) {\n      // Transpose -95-95\n      const sign = (byte2 & 1) === 0 ? 1 : -1;\n      const octaves = (byte2 & 1) === 0 ? 7 - ((byte2 & 14) >>> 1) : (byte2 & 14) >>> 1;\n      const halfsteps = (byte2 & 1) === 0 ? (byte2 & 240) >>> 4 : 11 - ((byte2 & 240) >>> 4);\n      return { type: 'tps', data: { value: sign * (12 * octaves + halfsteps) } };\n    }\n    if (byte1 === 182) {\n      // ignored\n      return { type: 'aux', data: { value: byte2 } };\n    }\n    if (byte1 === 198) {\n      return { type: 'pvd', data: { value: byte2 } };\n    }\n    if (byte1 === 214) {\n      return { type: 'pvr', data: { value: byte2 } };\n    }\n    if (byte1 === 230) {\n      return { type: 'max', data: { value: byte2 } };\n    }\n    if (byte1 === 246) {\n      return { type: 'utv', data: { value: byte2 } };\n    }\n    if (byte1 === 14) {\n      // Filter cutoff 0-255\n      return { type: 'f-c', data: { value: byte2 } };\n    }\n    if (byte1 === 46) {\n      return {\n        type: 'rtp',\n        data: {\n          octaves: 3 - (byte2 & 7),\n          halfsteps: ((byte2 & 248) >>> 3) - 11,\n        },\n      };\n    }\n    if (byte1 === 78) {\n      return { type: 'hld', data: { value: byte2 } };\n    }\n    if (byte1 === 30 || byte1 === 94 || byte1 === 158 || byte1 === 222) {\n      // Measure 0-999\n      return { type: 'ms#', data: { value: ((byte1 & 192) << 2) + byte2 } };\n    }\n    if (byte1 === 62 || byte1 === 126 || byte1 === 190 || byte1 === 254) {\n      let value = (byte2 << 2) + ((byte1 & 192) >>> 6);\n      if (byte2 > 192) value = (value << 22) >> 22;\n      return {\n        type: 'jif',\n        data: { value },\n      };\n    }\n    if ((byte1 & 15) === 10) {\n      // Detune -2047-2047\n      return {\n        type: 'dtn',\n        data: {\n          value: (byte1 & 16) === 0 ? ((byte1 & 224) << 3) + byte2 : ((byte1 & 224) << 3) + byte2 - 2048,\n        },\n      };\n    }\n    if ((byte1 & 3) === 3) {\n      // Portamento\n      return { type: 'por', data: { value: ((byte1 & 252) << 6) + byte2 } };\n    }\n  }\n};\n\nconst trans: { [key: number]: string } = {\n  0x3: 'stop',\n  0x5: 'wht',\n  0x8: 'shOff',\n  0x9: 'shOn',\n  0xd: '\\n',\n  0xe: 'lCase',\n  0x11: 'down',\n  0x12: 'rvsOn',\n  0x13: 'home',\n  0x14: 'del',\n  0x1c: 'red',\n  0x1d: 'right',\n  0x1e: 'grn',\n  0x1f: 'blu',\n  0x20: ' ',\n  0x21: '!',\n  0x22: '\"',\n  0x23: '#',\n  0x24: '$',\n  0x25: '%',\n  0x26: '&',\n  0x27: \"'\",\n  0x28: '(',\n  0x29: ')',\n  0x2a: '*',\n  0x2b: '+',\n  0x2c: ',',\n  0x2d: '-',\n  0x2e: '.',\n  0x2f: '/',\n  0x30: '0',\n  0x31: '1',\n  0x32: '2',\n  0x33: '3',\n  0x34: '4',\n  0x35: '5',\n  0x36: '6',\n  0x37: '7',\n  0x38: '8',\n  0x39: '9',\n  0x3a: ':',\n  0x3b: ';',\n  0x3c: '<',\n  0x3d: '=',\n  0x3e: '>',\n  0x3f: '?',\n  0x40: '@',\n  0x41: 'A',\n  0x42: 'B',\n  0x43: 'C',\n  0x44: 'D',\n  0x45: 'E',\n  0x46: 'F',\n  0x47: 'G',\n  0x48: 'H',\n  0x49: 'I',\n  0x4a: 'J',\n  0x4b: 'K',\n  0x4c: 'L',\n  0x4d: 'M',\n  0x4e: 'N',\n  0x4f: 'O',\n  0x50: 'P',\n  0x51: 'Q',\n  0x52: 'R',\n  0x53: 'S',\n  0x54: 'T',\n  0x55: 'U',\n  0x56: 'V',\n  0x57: 'W',\n  0x58: 'X',\n  0x59: 'Y',\n  0x5a: 'Z',\n  0x5b: '[',\n  0x5c: '£',\n  0x5d: ']',\n  0x5e: '↑',\n  0x5f: '←',\n  0x60: '─',\n  0x61: '♠',\n  0x62: '│',\n  0x63: '─',\n  0x64: '\\u{1fb77}',\n  0x65: '\\u{1fb76}',\n  0x66: '\\u{1fb7a}',\n  0x67: '\\u{1fb71}',\n  0x68: '\\u{1fb74}',\n  0x69: '╮',\n  0x6a: '╰',\n  0x6b: '╯',\n  0x6c: '\\u{1fb7c}',\n  0x6d: '╲',\n  0x6e: '╱',\n  0x6f: '\\u{1fb7d}',\n  0x70: '\\u{1fb7e}',\n  0x71: '•',\n  0x72: '\\u{1fb7b}',\n  0x73: '♥',\n  0x74: '\\u{1fb70}',\n  0x75: '╭',\n  0x76: '╳',\n  0x77: '○',\n  0x78: '♣',\n  0x79: '\\u{1fb75}',\n  0x7a: '♦',\n  0x7b: '┼',\n  0x7c: '\\u{1fb8c}',\n  0x7d: '│',\n  0x7e: 'π',\n  0x7f: '◥',\n  0x81: 'orng',\n  0x83: 'run',\n  0x85: 'f1',\n  0x86: 'f3',\n  0x87: 'f5',\n  0x88: 'f7',\n  0x89: 'f2',\n  0x8a: 'f4',\n  0x8b: 'f6',\n  0x8c: 'f8',\n  0x8d: 'shRtrn',\n  0x8e: 'uCase',\n  0x90: 'blk',\n  0x91: 'up',\n  0x92: 'rvsOff',\n  0x93: 'clr',\n  0x94: 'inst',\n  0x95: 'brn',\n  0x96: 'lred',\n  0x97: 'dgry',\n  0x98: 'mgry',\n  0x99: 'lgrn',\n  0x9a: 'lblu',\n  0x9b: 'lgry',\n  0x9c: 'pur',\n  0x9d: 'left',\n  0x9e: 'yel',\n  0x9f: 'cyn',\n  0xa0: ' ',\n  0xa1: '▌',\n  0xa2: '▄',\n  0xa3: '▔',\n  0xa4: '▁',\n  0xa5: '▎',\n  0xa6: '▒',\n  0xa7: '\\u{1fb87}',\n  0xa8: '\\u{1fb8f}',\n  0xa9: '◤',\n  0xaa: '\\u{1fb87}',\n  0xab: '├',\n  0xac: '▗',\n  0xad: '└',\n  0xae: '┐',\n  0xaf: '▂',\n  0xb0: '┌',\n  0xb1: '┴',\n  0xb2: '┬',\n  0xb3: '┤',\n  0xb4: '▎',\n  0xb5: '▍',\n  0xb6: '\\u{1fb88}',\n  0xb7: '\\u{1fb82}',\n  0xb8: '\\u{1fb83}',\n  0xb9: '▃',\n  0xba: '\\u{1fb7f}',\n  0xbb: '▖',\n  0xbc: '▝',\n  0xbd: '┘',\n  0xbe: '▘',\n  0xbf: '▚',\n  0xc0: '─',\n  0xc1: '♠',\n  0xc2: '│',\n  0xc3: '─',\n  0xc4: '\\u{1fb77}',\n  0xc5: '\\u{1fb76}',\n  0xc6: '\\u{1fb7a}',\n  0xc7: '\\u{1fb71}',\n  0xc8: '\\u{1fb74}',\n  0xc9: '╮',\n  0xca: '╰',\n  0xcb: '╯',\n  0xcc: '\\u{1fb7c}',\n  0xcd: '╲',\n  0xce: '╱',\n  0xcf: '\\u{1fb7d}',\n  0xd0: '\\u{1fb7e}',\n  0xd1: '•',\n  0xd2: '\\u{1fb7b}',\n  0xd3: '♥',\n  0xd4: '\\u{1fb70}',\n  0xd5: '╭',\n  0xd6: '╳',\n  0xd7: '○',\n  0xd8: '♣',\n  0xd9: '\\u{1fb75}',\n  0xda: '♦',\n  0xdb: '┼',\n  0xdc: '\\u{1fb8c}',\n  0xdd: '│',\n  0xde: 'π',\n  0xdf: '◥',\n  0xe0: ' ',\n  0xe1: '▌',\n  0xe2: '▄',\n  0xe3: '▔',\n  0xe4: '▁',\n  0xe5: '▎',\n  0xe6: '▒',\n  0xe7: '\\u{1fb87}',\n  0xe8: '\\u{1fb8f}',\n  0xe9: '◤',\n  0xea: '\\u{1fb87}',\n  0xeb: '├',\n  0xec: '▗',\n  0xed: '└',\n  0xee: '┐',\n  0xef: '▂',\n  0xf0: '┌',\n  0xf1: '┴',\n  0xf2: '┬',\n  0xf3: '┤',\n  0xf4: '▎',\n  0xf5: '▍',\n  0xf6: '\\u{1fb88}',\n  0xf7: '\\u{1fb82}',\n  0xf8: '\\u{1fb83}',\n  0xf9: '▃',\n  0xfa: '\\u{1fb7f}',\n  0xfb: '▖',\n  0xfc: '▝',\n  0xfd: '┘',\n  0xfe: '▘',\n  0xff: 'π',\n};\n\nconst readFileAsArrayBuffer = async (blob: Blob): Promise<ArrayBuffer> =>\n  new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(reader.result as ArrayBuffer);\n    reader.onerror = reject;\n    reader.readAsArrayBuffer(blob);\n  });\n\nexport const parseSid = async (blob: Blob): Promise<{ voices: Command[][]; text: string[] }> => {\n  const buffer = new DataView(await readFileAsArrayBuffer(blob));\n\n  let i = 0;\n  const startAddress = buffer.getUint16(i, true);\n  i += 2;\n  const voice1Length = buffer.getUint16(i, true);\n  i += 2;\n  const voice2Length = buffer.getUint16(i, true);\n  i += 2;\n  const voice3Length = buffer.getUint16(i, true);\n  i += 2;\n  const voice1Index = 8;\n  const voice2Index = voice1Index + voice1Length;\n  const voice3Index = voice2Index + voice2Length;\n  const textIndex = voice3Index + voice3Length;\n\n  const voice1: Command[] = [];\n  for (let i = voice1Index; i < voice2Index; i += 2) {\n    const byte1 = buffer.getUint8(i);\n    const byte2 = buffer.getUint8(i + 1);\n    const cmd = getCommand(byte1, byte2);\n    if (!cmd) {\n      console.error(`unknown command, voiceindex 0, index ${voice1.length}, byte1 ${byte1}, byte2 ${byte2}`);\n      break;\n    }\n    voice1.push(cmd);\n  }\n\n  const voice2: Command[] = [];\n  for (let i = voice2Index; i < voice3Index; i += 2) {\n    const byte1 = buffer.getUint8(i);\n    const byte2 = buffer.getUint8(i + 1);\n    const cmd = getCommand(byte1, byte2);\n    if (!cmd) {\n      console.error(`unknown command, voiceindex 1, index ${voice2.length}, byte1 ${byte1}, byte2 ${byte2}`);\n      break;\n    }\n    voice2.push(cmd);\n  }\n\n  const voice3: Command[] = [];\n  for (let i = voice3Index; i < textIndex; i += 2) {\n    const byte1 = buffer.getUint8(i);\n    const byte2 = buffer.getUint8(i + 1);\n    const cmd = getCommand(byte1, byte2);\n    if (!cmd) {\n      console.error(`unknown command, voiceindex 2, index ${voice3.length}, byte1 ${byte1}, byte2 ${byte2}`);\n      break;\n    }\n    voice3.push(cmd);\n  }\n\n  const text: string[] = [];\n  let line = '';\n  for (let i = textIndex; i < buffer.byteLength; i++) {\n    const byte = buffer.getUint8(i);\n    if (byte === 0xd) {\n      text.push(line);\n      line = '';\n    } else if (byte === 0x0) {\n      if (line) text.push(line);\n      break;\n    } else {\n      line += trans[byte] || '?';\n    }\n  }\n\n  return { voices: [voice1, voice2, voice3], text };\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(109);\n"],"names":["webpackQueues","webpackExports","webpackError","resolveQueue","FREQUENCY_FACTOR","CustomAudioParam","_audioContext","_values","_defaultValue","constructor","audioContext","defaultValue","this","push","startTime","currentTime","value","interpolation","setValueAtTime","unshift","length","i","splice","getValueAtTime","time","endTime","startValue","endValue","Math","exp","timeConstant","cancelScheduledValues","deleteIndex","findIndex","linearRampToValueAtTime","startEntry","pop","setTargetAtTime","SidOscillator","_oscillator","AudioWorkletNode","numberOfInputs","numberOfOutputs","outputChannelCount","processorOptions","sampleRate","voice1Params","waveform","parameters","get","frequency","width","sync","rng","voice2Params","voice3Params","connect","destination","output","input","disconnect","SidVoice","_adsrGain","_waveformParameter","_frequencyParameter","_widthParameter","_syncParameter","_rngParameter","_attackDurationParameter","_decayDurationParameter","_sustainLevelParameter","_releaseDurationParameter","_adsrGainParameter","voiceParams","GainNode","gain","inNode","frequencyParam","widthParam","c64Frequency","c64Waveform","waveforms","includes","static","c64AttackDuration","attackDuration","timeTable","c64DecayDuration","decayDuration","c64SustainLevel","sustainLevel","c64ReleaseDuration","releaseDuration","c64PulseWidth","pulseWidth","c64Sync","Number","c64Rng","start","cancelAndHoldAtTime","stop","reset","getFilterFrequency","y0","ymax","x0","mu","getLowPassFrequency","getHighPassFrequency","getBandPassFrequency","getFilterValue","log","max","min","getLowPassValue","getHighPassValue","getBandPassValue","getFilterResonance","a","b","c","m","n","SidFilter","_inNode","_lowPass","_highPass","_bandPass","_bandPassPeak","_outNode","_in_out","_in_low","_in_band","_in_high","_low_band","_low_high","_band_high","_low_out","_band_out","_high_out","BiquadFilterNode","type","Q","lowPassFilter","highPassFilter","bandPassFilter","bandPassPeakFilter","bandPassFrequency","c64Resonance","getHighPassResonance","getLowPassResonance","getBandPassResonance","resonance","c64FilterType","filterTypes","filterType","Sid","_mainGain","_voice1","_voice2","_voice3","_filter","_v1_gain","_v1_filter","_v1_main","_v2_gain","_v2_filter","_v2_main","_v3_gain","_v3_switch","_v3_filter","_v3_main","AudioContext","resume","voice1","voice2","voice3","voices","filter","c64FilterVoice","filterVoice","voiceIndex","c64Voice3Off","voice3Off","Boolean","c64Volume","volume","keyDivs","document","getElementById","textLines","channelSelect","leftFileSelect","leftOpenFileInput","leftClearButton","rightFileSelect","rightOpenFileInput","rightClearButton","playPauseButton","currentSpan","timeSlider","durationSpan","internalState","selectedChannel","isLoading","isPlaying","durationLeft","voicesDataLeft","fileSelectValueLeft","openFileValueLeft","durationRight","voicesDataRight","fileSelectValueRight","openFileValueRight","notes","currentNotes","text","audioContextStartTime","state","Proxy","set","target","property","clearKeyColor","index","updateUiKeyboard","updateUiText","updateUiFileSelects","updateUiPlayArea","getDuration","getTimeString","mins","floor","secs","String","padStart","note","undefined","j","setKeyColor","textContent","style","display","disabled","classList","add","remove","loadSidFile","async","channel","file","pause","voicesData","duration","clear","onchange","e","files","response","fetch","blob","onclick","color","background","colorMap","play","updateKeyboardInterval","setInterval","updateKeyboard","clearInterval","suspend","reloadSidFiles","onmousedown","ontouchstart","oninput","onmouseup","ontouchend","audioWorklet","addModule","createGain","Error","console","error","sidLeft","sidRight","merger","ChannelMergerNode","connectMono","connectStereo","calcFrequency","modifier","octave","detune","transpose","d","f","g","rst","NaN","calcDuration","dotted","tempo","utilityDuration","mod","setFrequencyPortamentoVibrato","voice","portamento","vibrato","rate","depth","porRate","sign","startFrequency","abs","targetValue","porDuration","vibRate","upperFreq","up","setPulseWidthSweep","sweepRate","getFilterSweepValues","calc","count","step","values","setFilterFrequencyWidthSweep","dur","setValueCurveAtTime","bandPassValues","setAutoFilterFrequency","noteFrequency","autoFilter","filterModes","filterFrequency","filterValue","initVoices","sid","loadVoices","globalTime","voicesVars","cmdPointer","callStack","hed","pointer","releasePoint","tie","portamentoRate","portamentoStartFrequency","pulseWidthSweepRate","vibratoRate","vibratoDepth","filterFrequencySweepRate","halt","phrases","cmd","data","phrase","find","phr","JSON","stringify","slice","noteIndex","absFrequency","some","v","map","loadFile","sidData","reloadVoices","getCommand","byte1","byte2","warn","trunc","octaves","halfsteps","trans","parseSid","buffer","DataView","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","getUint16","voice1Length","voice2Length","voice3Length","voice2Index","voice3Index","textIndex","getUint8","line","byteLength","byte","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","Symbol","queue","forEach","fn","r","body","hasAwait","currentDeps","outerResolve","depQueues","Set","promise","rej","x","deps","dep","then","obj","ret","wrapDeps","getResult","fnQueue","q","has","err","definition","key","o","Object","defineProperty","enumerable","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}